import{g as Je}from"../chunks/navigation.76c92d44.js";import{b as Qe}from"../chunks/paths.f0e58bc4.js";import{p as tn}from"../chunks/stores.7e39d4e8.js";import{g as rn,c as en}from"../chunks/_commonjsHelpers.23102255.js";var Br={},Er={};Er.byteLength=sn;Er.toByteArray=un;Er.fromByteArray=ln;var zt=[],Ct=[],nn=typeof Uint8Array<"u"?Uint8Array:Array,jr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var ir=0,on=jr.length;ir<on;++ir)zt[ir]=jr[ir],Ct[jr.charCodeAt(ir)]=ir;Ct["-".charCodeAt(0)]=62;Ct["_".charCodeAt(0)]=63;function Re(f){var i=f.length;if(i%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=f.indexOf("=");e===-1&&(e=i);var a=e===i?0:4-e%4;return[e,a]}function sn(f){var i=Re(f),e=i[0],a=i[1];return(e+a)*3/4-a}function fn(f,i,e){return(i+e)*3/4-e}function un(f){var i,e=Re(f),a=e[0],g=e[1],s=new nn(fn(f,a,g)),v=0,d=g>0?a-4:a,_;for(_=0;_<d;_+=4)i=Ct[f.charCodeAt(_)]<<18|Ct[f.charCodeAt(_+1)]<<12|Ct[f.charCodeAt(_+2)]<<6|Ct[f.charCodeAt(_+3)],s[v++]=i>>16&255,s[v++]=i>>8&255,s[v++]=i&255;return g===2&&(i=Ct[f.charCodeAt(_)]<<2|Ct[f.charCodeAt(_+1)]>>4,s[v++]=i&255),g===1&&(i=Ct[f.charCodeAt(_)]<<10|Ct[f.charCodeAt(_+1)]<<4|Ct[f.charCodeAt(_+2)]>>2,s[v++]=i>>8&255,s[v++]=i&255),s}function an(f){return zt[f>>18&63]+zt[f>>12&63]+zt[f>>6&63]+zt[f&63]}function hn(f,i,e){for(var a,g=[],s=i;s<e;s+=3)a=(f[s]<<16&16711680)+(f[s+1]<<8&65280)+(f[s+2]&255),g.push(an(a));return g.join("")}function ln(f){for(var i,e=f.length,a=e%3,g=[],s=16383,v=0,d=e-a;v<d;v+=s)g.push(hn(f,v,v+s>d?d:v+s));return a===1?(i=f[e-1],g.push(zt[i>>2]+zt[i<<4&63]+"==")):a===2&&(i=(f[e-2]<<8)+f[e-1],g.push(zt[i>>10]+zt[i>>4&63]+zt[i<<2&63]+"=")),g.join("")}var se={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */se.read=function(f,i,e,a,g){var s,v,d=g*8-a-1,_=(1<<d)-1,b=_>>1,I=-7,S=e?g-1:0,L=e?-1:1,C=f[i+S];for(S+=L,s=C&(1<<-I)-1,C>>=-I,I+=d;I>0;s=s*256+f[i+S],S+=L,I-=8);for(v=s&(1<<-I)-1,s>>=-I,I+=a;I>0;v=v*256+f[i+S],S+=L,I-=8);if(s===0)s=1-b;else{if(s===_)return v?NaN:(C?-1:1)*(1/0);v=v+Math.pow(2,a),s=s-b}return(C?-1:1)*v*Math.pow(2,s-a)};se.write=function(f,i,e,a,g,s){var v,d,_,b=s*8-g-1,I=(1<<b)-1,S=I>>1,L=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,C=a?0:s-1,O=a?1:-1,U=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(d=isNaN(i)?1:0,v=I):(v=Math.floor(Math.log(i)/Math.LN2),i*(_=Math.pow(2,-v))<1&&(v--,_*=2),v+S>=1?i+=L/_:i+=L*Math.pow(2,1-S),i*_>=2&&(v++,_/=2),v+S>=I?(d=0,v=I):v+S>=1?(d=(i*_-1)*Math.pow(2,g),v=v+S):(d=i*Math.pow(2,S-1)*Math.pow(2,g),v=0));g>=8;f[e+C]=d&255,C+=O,d/=256,g-=8);for(v=v<<g|d,b+=g;b>0;f[e+C]=v&255,C+=O,v/=256,b-=8);f[e+C-O]|=U*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(f){const i=Er,e=se,a=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;f.Buffer=d,f.SlowBuffer=$,f.INSPECT_MAX_BYTES=50;const g=2147483647;f.kMaxLength=g,d.TYPED_ARRAY_SUPPORT=s(),!d.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const l=new Uint8Array(1),r={foo:function(){return 42}};return Object.setPrototypeOf(r,Uint8Array.prototype),Object.setPrototypeOf(l,r),l.foo()===42}catch{return!1}}Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}});function v(l){if(l>g)throw new RangeError('The value "'+l+'" is invalid for option "size"');const r=new Uint8Array(l);return Object.setPrototypeOf(r,d.prototype),r}function d(l,r,o){if(typeof l=="number"){if(typeof r=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return S(l)}return _(l,r,o)}d.poolSize=8192;function _(l,r,o){if(typeof l=="string")return L(l,r);if(ArrayBuffer.isView(l))return O(l);if(l==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof l);if(nt(l,ArrayBuffer)||l&&nt(l.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(nt(l,SharedArrayBuffer)||l&&nt(l.buffer,SharedArrayBuffer)))return U(l,r,o);if(typeof l=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const y=l.valueOf&&l.valueOf();if(y!=null&&y!==l)return d.from(y,r,o);const B=F(l);if(B)return B;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof l[Symbol.toPrimitive]=="function")return d.from(l[Symbol.toPrimitive]("string"),r,o);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof l)}d.from=function(l,r,o){return _(l,r,o)},Object.setPrototypeOf(d.prototype,Uint8Array.prototype),Object.setPrototypeOf(d,Uint8Array);function b(l){if(typeof l!="number")throw new TypeError('"size" argument must be of type number');if(l<0)throw new RangeError('The value "'+l+'" is invalid for option "size"')}function I(l,r,o){return b(l),l<=0?v(l):r!==void 0?typeof o=="string"?v(l).fill(r,o):v(l).fill(r):v(l)}d.alloc=function(l,r,o){return I(l,r,o)};function S(l){return b(l),v(l<0?0:R(l)|0)}d.allocUnsafe=function(l){return S(l)},d.allocUnsafeSlow=function(l){return S(l)};function L(l,r){if((typeof r!="string"||r==="")&&(r="utf8"),!d.isEncoding(r))throw new TypeError("Unknown encoding: "+r);const o=z(l,r)|0;let y=v(o);const B=y.write(l,r);return B!==o&&(y=y.slice(0,B)),y}function C(l){const r=l.length<0?0:R(l.length)|0,o=v(r);for(let y=0;y<r;y+=1)o[y]=l[y]&255;return o}function O(l){if(nt(l,Uint8Array)){const r=new Uint8Array(l);return U(r.buffer,r.byteOffset,r.byteLength)}return C(l)}function U(l,r,o){if(r<0||l.byteLength<r)throw new RangeError('"offset" is outside of buffer bounds');if(l.byteLength<r+(o||0))throw new RangeError('"length" is outside of buffer bounds');let y;return r===void 0&&o===void 0?y=new Uint8Array(l):o===void 0?y=new Uint8Array(l,r):y=new Uint8Array(l,r,o),Object.setPrototypeOf(y,d.prototype),y}function F(l){if(d.isBuffer(l)){const r=R(l.length)|0,o=v(r);return o.length===0||l.copy(o,0,0,r),o}if(l.length!==void 0)return typeof l.length!="number"||nr(l.length)?v(0):C(l);if(l.type==="Buffer"&&Array.isArray(l.data))return C(l.data)}function R(l){if(l>=g)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+g.toString(16)+" bytes");return l|0}function $(l){return+l!=l&&(l=0),d.alloc(+l)}d.isBuffer=function(r){return r!=null&&r._isBuffer===!0&&r!==d.prototype},d.compare=function(r,o){if(nt(r,Uint8Array)&&(r=d.from(r,r.offset,r.byteLength)),nt(o,Uint8Array)&&(o=d.from(o,o.offset,o.byteLength)),!d.isBuffer(r)||!d.isBuffer(o))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(r===o)return 0;let y=r.length,B=o.length;for(let A=0,T=Math.min(y,B);A<T;++A)if(r[A]!==o[A]){y=r[A],B=o[A];break}return y<B?-1:B<y?1:0},d.isEncoding=function(r){switch(String(r).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(r,o){if(!Array.isArray(r))throw new TypeError('"list" argument must be an Array of Buffers');if(r.length===0)return d.alloc(0);let y;if(o===void 0)for(o=0,y=0;y<r.length;++y)o+=r[y].length;const B=d.allocUnsafe(o);let A=0;for(y=0;y<r.length;++y){let T=r[y];if(nt(T,Uint8Array))A+T.length>B.length?(d.isBuffer(T)||(T=d.from(T)),T.copy(B,A)):Uint8Array.prototype.set.call(B,T,A);else if(d.isBuffer(T))T.copy(B,A);else throw new TypeError('"list" argument must be an Array of Buffers');A+=T.length}return B};function z(l,r){if(d.isBuffer(l))return l.length;if(ArrayBuffer.isView(l)||nt(l,ArrayBuffer))return l.byteLength;if(typeof l!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof l);const o=l.length,y=arguments.length>2&&arguments[2]===!0;if(!y&&o===0)return 0;let B=!1;for(;;)switch(r){case"ascii":case"latin1":case"binary":return o;case"utf8":case"utf-8":return er(l).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return o*2;case"hex":return o>>>1;case"base64":return hr(l).length;default:if(B)return y?-1:er(l).length;r=(""+r).toLowerCase(),B=!0}}d.byteLength=z;function j(l,r,o){let y=!1;if((r===void 0||r<0)&&(r=0),r>this.length||((o===void 0||o>this.length)&&(o=this.length),o<=0)||(o>>>=0,r>>>=0,o<=r))return"";for(l||(l="utf8");;)switch(l){case"hex":return m(this,r,o);case"utf8":case"utf-8":return c(this,r,o);case"ascii":return M(this,r,o);case"latin1":case"binary":return E(this,r,o);case"base64":return u(this,r,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return n(this,r,o);default:if(y)throw new TypeError("Unknown encoding: "+l);l=(l+"").toLowerCase(),y=!0}}d.prototype._isBuffer=!0;function Z(l,r,o){const y=l[r];l[r]=l[o],l[o]=y}d.prototype.swap16=function(){const r=this.length;if(r%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let o=0;o<r;o+=2)Z(this,o,o+1);return this},d.prototype.swap32=function(){const r=this.length;if(r%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let o=0;o<r;o+=4)Z(this,o,o+3),Z(this,o+1,o+2);return this},d.prototype.swap64=function(){const r=this.length;if(r%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let o=0;o<r;o+=8)Z(this,o,o+7),Z(this,o+1,o+6),Z(this,o+2,o+5),Z(this,o+3,o+4);return this},d.prototype.toString=function(){const r=this.length;return r===0?"":arguments.length===0?c(this,0,r):j.apply(this,arguments)},d.prototype.toLocaleString=d.prototype.toString,d.prototype.equals=function(r){if(!d.isBuffer(r))throw new TypeError("Argument must be a Buffer");return this===r?!0:d.compare(this,r)===0},d.prototype.inspect=function(){let r="";const o=f.INSPECT_MAX_BYTES;return r=this.toString("hex",0,o).replace(/(.{2})/g,"$1 ").trim(),this.length>o&&(r+=" ... "),"<Buffer "+r+">"},a&&(d.prototype[a]=d.prototype.inspect),d.prototype.compare=function(r,o,y,B,A){if(nt(r,Uint8Array)&&(r=d.from(r,r.offset,r.byteLength)),!d.isBuffer(r))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof r);if(o===void 0&&(o=0),y===void 0&&(y=r?r.length:0),B===void 0&&(B=0),A===void 0&&(A=this.length),o<0||y>r.length||B<0||A>this.length)throw new RangeError("out of range index");if(B>=A&&o>=y)return 0;if(B>=A)return-1;if(o>=y)return 1;if(o>>>=0,y>>>=0,B>>>=0,A>>>=0,this===r)return 0;let T=A-B,K=y-o;const ht=Math.min(T,K),W=this.slice(B,A),Y=r.slice(o,y);for(let ot=0;ot<ht;++ot)if(W[ot]!==Y[ot]){T=W[ot],K=Y[ot];break}return T<K?-1:K<T?1:0};function P(l,r,o,y,B){if(l.length===0)return-1;if(typeof o=="string"?(y=o,o=0):o>2147483647?o=2147483647:o<-2147483648&&(o=-2147483648),o=+o,nr(o)&&(o=B?0:l.length-1),o<0&&(o=l.length+o),o>=l.length){if(B)return-1;o=l.length-1}else if(o<0)if(B)o=0;else return-1;if(typeof r=="string"&&(r=d.from(r,y)),d.isBuffer(r))return r.length===0?-1:H(l,r,o,y,B);if(typeof r=="number")return r=r&255,typeof Uint8Array.prototype.indexOf=="function"?B?Uint8Array.prototype.indexOf.call(l,r,o):Uint8Array.prototype.lastIndexOf.call(l,r,o):H(l,[r],o,y,B);throw new TypeError("val must be string, number or Buffer")}function H(l,r,o,y,B){let A=1,T=l.length,K=r.length;if(y!==void 0&&(y=String(y).toLowerCase(),y==="ucs2"||y==="ucs-2"||y==="utf16le"||y==="utf-16le")){if(l.length<2||r.length<2)return-1;A=2,T/=2,K/=2,o/=2}function ht(Y,ot){return A===1?Y[ot]:Y.readUInt16BE(ot*A)}let W;if(B){let Y=-1;for(W=o;W<T;W++)if(ht(l,W)===ht(r,Y===-1?0:W-Y)){if(Y===-1&&(Y=W),W-Y+1===K)return Y*A}else Y!==-1&&(W-=W-Y),Y=-1}else for(o+K>T&&(o=T-K),W=o;W>=0;W--){let Y=!0;for(let ot=0;ot<K;ot++)if(ht(l,W+ot)!==ht(r,ot)){Y=!1;break}if(Y)return W}return-1}d.prototype.includes=function(r,o,y){return this.indexOf(r,o,y)!==-1},d.prototype.indexOf=function(r,o,y){return P(this,r,o,y,!0)},d.prototype.lastIndexOf=function(r,o,y){return P(this,r,o,y,!1)};function V(l,r,o,y){o=Number(o)||0;const B=l.length-o;y?(y=Number(y),y>B&&(y=B)):y=B;const A=r.length;y>A/2&&(y=A/2);let T;for(T=0;T<y;++T){const K=parseInt(r.substr(T*2,2),16);if(nr(K))return T;l[o+T]=K}return T}function G(l,r,o,y){return at(er(r,l.length-o),l,o,y)}function Q(l,r,o,y){return at(lt(r),l,o,y)}function x(l,r,o,y){return at(hr(r),l,o,y)}function t(l,r,o,y){return at(ct(r,l.length-o),l,o,y)}d.prototype.write=function(r,o,y,B){if(o===void 0)B="utf8",y=this.length,o=0;else if(y===void 0&&typeof o=="string")B=o,y=this.length,o=0;else if(isFinite(o))o=o>>>0,isFinite(y)?(y=y>>>0,B===void 0&&(B="utf8")):(B=y,y=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const A=this.length-o;if((y===void 0||y>A)&&(y=A),r.length>0&&(y<0||o<0)||o>this.length)throw new RangeError("Attempt to write outside buffer bounds");B||(B="utf8");let T=!1;for(;;)switch(B){case"hex":return V(this,r,o,y);case"utf8":case"utf-8":return G(this,r,o,y);case"ascii":case"latin1":case"binary":return Q(this,r,o,y);case"base64":return x(this,r,o,y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t(this,r,o,y);default:if(T)throw new TypeError("Unknown encoding: "+B);B=(""+B).toLowerCase(),T=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function u(l,r,o){return r===0&&o===l.length?i.fromByteArray(l):i.fromByteArray(l.slice(r,o))}function c(l,r,o){o=Math.min(l.length,o);const y=[];let B=r;for(;B<o;){const A=l[B];let T=null,K=A>239?4:A>223?3:A>191?2:1;if(B+K<=o){let ht,W,Y,ot;switch(K){case 1:A<128&&(T=A);break;case 2:ht=l[B+1],(ht&192)===128&&(ot=(A&31)<<6|ht&63,ot>127&&(T=ot));break;case 3:ht=l[B+1],W=l[B+2],(ht&192)===128&&(W&192)===128&&(ot=(A&15)<<12|(ht&63)<<6|W&63,ot>2047&&(ot<55296||ot>57343)&&(T=ot));break;case 4:ht=l[B+1],W=l[B+2],Y=l[B+3],(ht&192)===128&&(W&192)===128&&(Y&192)===128&&(ot=(A&15)<<18|(ht&63)<<12|(W&63)<<6|Y&63,ot>65535&&ot<1114112&&(T=ot))}}T===null?(T=65533,K=1):T>65535&&(T-=65536,y.push(T>>>10&1023|55296),T=56320|T&1023),y.push(T),B+=K}return p(y)}const h=4096;function p(l){const r=l.length;if(r<=h)return String.fromCharCode.apply(String,l);let o="",y=0;for(;y<r;)o+=String.fromCharCode.apply(String,l.slice(y,y+=h));return o}function M(l,r,o){let y="";o=Math.min(l.length,o);for(let B=r;B<o;++B)y+=String.fromCharCode(l[B]&127);return y}function E(l,r,o){let y="";o=Math.min(l.length,o);for(let B=r;B<o;++B)y+=String.fromCharCode(l[B]);return y}function m(l,r,o){const y=l.length;(!r||r<0)&&(r=0),(!o||o<0||o>y)&&(o=y);let B="";for(let A=r;A<o;++A)B+=dt[l[A]];return B}function n(l,r,o){const y=l.slice(r,o);let B="";for(let A=0;A<y.length-1;A+=2)B+=String.fromCharCode(y[A]+y[A+1]*256);return B}d.prototype.slice=function(r,o){const y=this.length;r=~~r,o=o===void 0?y:~~o,r<0?(r+=y,r<0&&(r=0)):r>y&&(r=y),o<0?(o+=y,o<0&&(o=0)):o>y&&(o=y),o<r&&(o=r);const B=this.subarray(r,o);return Object.setPrototypeOf(B,d.prototype),B};function w(l,r,o){if(l%1!==0||l<0)throw new RangeError("offset is not uint");if(l+r>o)throw new RangeError("Trying to access beyond buffer length")}d.prototype.readUintLE=d.prototype.readUIntLE=function(r,o,y){r=r>>>0,o=o>>>0,y||w(r,o,this.length);let B=this[r],A=1,T=0;for(;++T<o&&(A*=256);)B+=this[r+T]*A;return B},d.prototype.readUintBE=d.prototype.readUIntBE=function(r,o,y){r=r>>>0,o=o>>>0,y||w(r,o,this.length);let B=this[r+--o],A=1;for(;o>0&&(A*=256);)B+=this[r+--o]*A;return B},d.prototype.readUint8=d.prototype.readUInt8=function(r,o){return r=r>>>0,o||w(r,1,this.length),this[r]},d.prototype.readUint16LE=d.prototype.readUInt16LE=function(r,o){return r=r>>>0,o||w(r,2,this.length),this[r]|this[r+1]<<8},d.prototype.readUint16BE=d.prototype.readUInt16BE=function(r,o){return r=r>>>0,o||w(r,2,this.length),this[r]<<8|this[r+1]},d.prototype.readUint32LE=d.prototype.readUInt32LE=function(r,o){return r=r>>>0,o||w(r,4,this.length),(this[r]|this[r+1]<<8|this[r+2]<<16)+this[r+3]*16777216},d.prototype.readUint32BE=d.prototype.readUInt32BE=function(r,o){return r=r>>>0,o||w(r,4,this.length),this[r]*16777216+(this[r+1]<<16|this[r+2]<<8|this[r+3])},d.prototype.readBigUInt64LE=st(function(r){r=r>>>0,J(r,"offset");const o=this[r],y=this[r+7];(o===void 0||y===void 0)&&Nt(r,this.length-8);const B=o+this[++r]*2**8+this[++r]*2**16+this[++r]*2**24,A=this[++r]+this[++r]*2**8+this[++r]*2**16+y*2**24;return BigInt(B)+(BigInt(A)<<BigInt(32))}),d.prototype.readBigUInt64BE=st(function(r){r=r>>>0,J(r,"offset");const o=this[r],y=this[r+7];(o===void 0||y===void 0)&&Nt(r,this.length-8);const B=o*2**24+this[++r]*2**16+this[++r]*2**8+this[++r],A=this[++r]*2**24+this[++r]*2**16+this[++r]*2**8+y;return(BigInt(B)<<BigInt(32))+BigInt(A)}),d.prototype.readIntLE=function(r,o,y){r=r>>>0,o=o>>>0,y||w(r,o,this.length);let B=this[r],A=1,T=0;for(;++T<o&&(A*=256);)B+=this[r+T]*A;return A*=128,B>=A&&(B-=Math.pow(2,8*o)),B},d.prototype.readIntBE=function(r,o,y){r=r>>>0,o=o>>>0,y||w(r,o,this.length);let B=o,A=1,T=this[r+--B];for(;B>0&&(A*=256);)T+=this[r+--B]*A;return A*=128,T>=A&&(T-=Math.pow(2,8*o)),T},d.prototype.readInt8=function(r,o){return r=r>>>0,o||w(r,1,this.length),this[r]&128?(255-this[r]+1)*-1:this[r]},d.prototype.readInt16LE=function(r,o){r=r>>>0,o||w(r,2,this.length);const y=this[r]|this[r+1]<<8;return y&32768?y|4294901760:y},d.prototype.readInt16BE=function(r,o){r=r>>>0,o||w(r,2,this.length);const y=this[r+1]|this[r]<<8;return y&32768?y|4294901760:y},d.prototype.readInt32LE=function(r,o){return r=r>>>0,o||w(r,4,this.length),this[r]|this[r+1]<<8|this[r+2]<<16|this[r+3]<<24},d.prototype.readInt32BE=function(r,o){return r=r>>>0,o||w(r,4,this.length),this[r]<<24|this[r+1]<<16|this[r+2]<<8|this[r+3]},d.prototype.readBigInt64LE=st(function(r){r=r>>>0,J(r,"offset");const o=this[r],y=this[r+7];(o===void 0||y===void 0)&&Nt(r,this.length-8);const B=this[r+4]+this[r+5]*2**8+this[r+6]*2**16+(y<<24);return(BigInt(B)<<BigInt(32))+BigInt(o+this[++r]*2**8+this[++r]*2**16+this[++r]*2**24)}),d.prototype.readBigInt64BE=st(function(r){r=r>>>0,J(r,"offset");const o=this[r],y=this[r+7];(o===void 0||y===void 0)&&Nt(r,this.length-8);const B=(o<<24)+this[++r]*2**16+this[++r]*2**8+this[++r];return(BigInt(B)<<BigInt(32))+BigInt(this[++r]*2**24+this[++r]*2**16+this[++r]*2**8+y)}),d.prototype.readFloatLE=function(r,o){return r=r>>>0,o||w(r,4,this.length),e.read(this,r,!0,23,4)},d.prototype.readFloatBE=function(r,o){return r=r>>>0,o||w(r,4,this.length),e.read(this,r,!1,23,4)},d.prototype.readDoubleLE=function(r,o){return r=r>>>0,o||w(r,8,this.length),e.read(this,r,!0,52,8)},d.prototype.readDoubleBE=function(r,o){return r=r>>>0,o||w(r,8,this.length),e.read(this,r,!1,52,8)};function k(l,r,o,y,B,A){if(!d.isBuffer(l))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>B||r<A)throw new RangeError('"value" argument is out of bounds');if(o+y>l.length)throw new RangeError("Index out of range")}d.prototype.writeUintLE=d.prototype.writeUIntLE=function(r,o,y,B){if(r=+r,o=o>>>0,y=y>>>0,!B){const K=Math.pow(2,8*y)-1;k(this,r,o,y,K,0)}let A=1,T=0;for(this[o]=r&255;++T<y&&(A*=256);)this[o+T]=r/A&255;return o+y},d.prototype.writeUintBE=d.prototype.writeUIntBE=function(r,o,y,B){if(r=+r,o=o>>>0,y=y>>>0,!B){const K=Math.pow(2,8*y)-1;k(this,r,o,y,K,0)}let A=y-1,T=1;for(this[o+A]=r&255;--A>=0&&(T*=256);)this[o+A]=r/T&255;return o+y},d.prototype.writeUint8=d.prototype.writeUInt8=function(r,o,y){return r=+r,o=o>>>0,y||k(this,r,o,1,255,0),this[o]=r&255,o+1},d.prototype.writeUint16LE=d.prototype.writeUInt16LE=function(r,o,y){return r=+r,o=o>>>0,y||k(this,r,o,2,65535,0),this[o]=r&255,this[o+1]=r>>>8,o+2},d.prototype.writeUint16BE=d.prototype.writeUInt16BE=function(r,o,y){return r=+r,o=o>>>0,y||k(this,r,o,2,65535,0),this[o]=r>>>8,this[o+1]=r&255,o+2},d.prototype.writeUint32LE=d.prototype.writeUInt32LE=function(r,o,y){return r=+r,o=o>>>0,y||k(this,r,o,4,4294967295,0),this[o+3]=r>>>24,this[o+2]=r>>>16,this[o+1]=r>>>8,this[o]=r&255,o+4},d.prototype.writeUint32BE=d.prototype.writeUInt32BE=function(r,o,y){return r=+r,o=o>>>0,y||k(this,r,o,4,4294967295,0),this[o]=r>>>24,this[o+1]=r>>>16,this[o+2]=r>>>8,this[o+3]=r&255,o+4};function N(l,r,o,y,B){it(r,y,B,l,o,7);let A=Number(r&BigInt(4294967295));l[o++]=A,A=A>>8,l[o++]=A,A=A>>8,l[o++]=A,A=A>>8,l[o++]=A;let T=Number(r>>BigInt(32)&BigInt(4294967295));return l[o++]=T,T=T>>8,l[o++]=T,T=T>>8,l[o++]=T,T=T>>8,l[o++]=T,o}function q(l,r,o,y,B){it(r,y,B,l,o,7);let A=Number(r&BigInt(4294967295));l[o+7]=A,A=A>>8,l[o+6]=A,A=A>>8,l[o+5]=A,A=A>>8,l[o+4]=A;let T=Number(r>>BigInt(32)&BigInt(4294967295));return l[o+3]=T,T=T>>8,l[o+2]=T,T=T>>8,l[o+1]=T,T=T>>8,l[o]=T,o+8}d.prototype.writeBigUInt64LE=st(function(r,o=0){return N(this,r,o,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeBigUInt64BE=st(function(r,o=0){return q(this,r,o,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeIntLE=function(r,o,y,B){if(r=+r,o=o>>>0,!B){const ht=Math.pow(2,8*y-1);k(this,r,o,y,ht-1,-ht)}let A=0,T=1,K=0;for(this[o]=r&255;++A<y&&(T*=256);)r<0&&K===0&&this[o+A-1]!==0&&(K=1),this[o+A]=(r/T>>0)-K&255;return o+y},d.prototype.writeIntBE=function(r,o,y,B){if(r=+r,o=o>>>0,!B){const ht=Math.pow(2,8*y-1);k(this,r,o,y,ht-1,-ht)}let A=y-1,T=1,K=0;for(this[o+A]=r&255;--A>=0&&(T*=256);)r<0&&K===0&&this[o+A+1]!==0&&(K=1),this[o+A]=(r/T>>0)-K&255;return o+y},d.prototype.writeInt8=function(r,o,y){return r=+r,o=o>>>0,y||k(this,r,o,1,127,-128),r<0&&(r=255+r+1),this[o]=r&255,o+1},d.prototype.writeInt16LE=function(r,o,y){return r=+r,o=o>>>0,y||k(this,r,o,2,32767,-32768),this[o]=r&255,this[o+1]=r>>>8,o+2},d.prototype.writeInt16BE=function(r,o,y){return r=+r,o=o>>>0,y||k(this,r,o,2,32767,-32768),this[o]=r>>>8,this[o+1]=r&255,o+2},d.prototype.writeInt32LE=function(r,o,y){return r=+r,o=o>>>0,y||k(this,r,o,4,2147483647,-2147483648),this[o]=r&255,this[o+1]=r>>>8,this[o+2]=r>>>16,this[o+3]=r>>>24,o+4},d.prototype.writeInt32BE=function(r,o,y){return r=+r,o=o>>>0,y||k(this,r,o,4,2147483647,-2147483648),r<0&&(r=4294967295+r+1),this[o]=r>>>24,this[o+1]=r>>>16,this[o+2]=r>>>8,this[o+3]=r&255,o+4},d.prototype.writeBigInt64LE=st(function(r,o=0){return N(this,r,o,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),d.prototype.writeBigInt64BE=st(function(r,o=0){return q(this,r,o,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function D(l,r,o,y,B,A){if(o+y>l.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("Index out of range")}function X(l,r,o,y,B){return r=+r,o=o>>>0,B||D(l,r,o,4),e.write(l,r,o,y,23,4),o+4}d.prototype.writeFloatLE=function(r,o,y){return X(this,r,o,!0,y)},d.prototype.writeFloatBE=function(r,o,y){return X(this,r,o,!1,y)};function tt(l,r,o,y,B){return r=+r,o=o>>>0,B||D(l,r,o,8),e.write(l,r,o,y,52,8),o+8}d.prototype.writeDoubleLE=function(r,o,y){return tt(this,r,o,!0,y)},d.prototype.writeDoubleBE=function(r,o,y){return tt(this,r,o,!1,y)},d.prototype.copy=function(r,o,y,B){if(!d.isBuffer(r))throw new TypeError("argument should be a Buffer");if(y||(y=0),!B&&B!==0&&(B=this.length),o>=r.length&&(o=r.length),o||(o=0),B>0&&B<y&&(B=y),B===y||r.length===0||this.length===0)return 0;if(o<0)throw new RangeError("targetStart out of bounds");if(y<0||y>=this.length)throw new RangeError("Index out of range");if(B<0)throw new RangeError("sourceEnd out of bounds");B>this.length&&(B=this.length),r.length-o<B-y&&(B=r.length-o+y);const A=B-y;return this===r&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(o,y,B):Uint8Array.prototype.set.call(r,this.subarray(y,B),o),A},d.prototype.fill=function(r,o,y,B){if(typeof r=="string"){if(typeof o=="string"?(B=o,o=0,y=this.length):typeof y=="string"&&(B=y,y=this.length),B!==void 0&&typeof B!="string")throw new TypeError("encoding must be a string");if(typeof B=="string"&&!d.isEncoding(B))throw new TypeError("Unknown encoding: "+B);if(r.length===1){const T=r.charCodeAt(0);(B==="utf8"&&T<128||B==="latin1")&&(r=T)}}else typeof r=="number"?r=r&255:typeof r=="boolean"&&(r=Number(r));if(o<0||this.length<o||this.length<y)throw new RangeError("Out of range index");if(y<=o)return this;o=o>>>0,y=y===void 0?this.length:y>>>0,r||(r=0);let A;if(typeof r=="number")for(A=o;A<y;++A)this[A]=r;else{const T=d.isBuffer(r)?r:d.from(r,B),K=T.length;if(K===0)throw new TypeError('The value "'+r+'" is invalid for argument "value"');for(A=0;A<y-o;++A)this[A+o]=T[A%K]}return this};const kt={};function rt(l,r,o){kt[l]=class extends o{constructor(){super(),Object.defineProperty(this,"message",{value:r.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${l}]`,this.stack,delete this.name}get code(){return l}set code(B){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:B,writable:!0})}toString(){return`${this.name} [${l}]: ${this.message}`}}}rt("ERR_BUFFER_OUT_OF_BOUNDS",function(l){return l?`${l} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),rt("ERR_INVALID_ARG_TYPE",function(l,r){return`The "${l}" argument must be of type number. Received type ${typeof r}`},TypeError),rt("ERR_OUT_OF_RANGE",function(l,r,o){let y=`The value of "${l}" is out of range.`,B=o;return Number.isInteger(o)&&Math.abs(o)>2**32?B=et(String(o)):typeof o=="bigint"&&(B=String(o),(o>BigInt(2)**BigInt(32)||o<-(BigInt(2)**BigInt(32)))&&(B=et(B)),B+="n"),y+=` It must be ${r}. Received ${B}`,y},RangeError);function et(l){let r="",o=l.length;const y=l[0]==="-"?1:0;for(;o>=y+4;o-=3)r=`_${l.slice(o-3,o)}${r}`;return`${l.slice(0,o)}${r}`}function Xt(l,r,o){J(r,"offset"),(l[r]===void 0||l[r+o]===void 0)&&Nt(r,l.length-(o+1))}function it(l,r,o,y,B,A){if(l>o||l<r){const T=typeof r=="bigint"?"n":"";let K;throw A>3?r===0||r===BigInt(0)?K=`>= 0${T} and < 2${T} ** ${(A+1)*8}${T}`:K=`>= -(2${T} ** ${(A+1)*8-1}${T}) and < 2 ** ${(A+1)*8-1}${T}`:K=`>= ${r}${T} and <= ${o}${T}`,new kt.ERR_OUT_OF_RANGE("value",K,l)}Xt(y,B,A)}function J(l,r){if(typeof l!="number")throw new kt.ERR_INVALID_ARG_TYPE(r,"number",l)}function Nt(l,r,o){throw Math.floor(l)!==l?(J(l,o),new kt.ERR_OUT_OF_RANGE(o||"offset","an integer",l)):r<0?new kt.ERR_BUFFER_OUT_OF_BOUNDS:new kt.ERR_OUT_OF_RANGE(o||"offset",`>= ${o?1:0} and <= ${r}`,l)}const ft=/[^+/0-9A-Za-z-_]/g;function ut(l){if(l=l.split("=")[0],l=l.trim().replace(ft,""),l.length<2)return"";for(;l.length%4!==0;)l=l+"=";return l}function er(l,r){r=r||1/0;let o;const y=l.length;let B=null;const A=[];for(let T=0;T<y;++T){if(o=l.charCodeAt(T),o>55295&&o<57344){if(!B){if(o>56319){(r-=3)>-1&&A.push(239,191,189);continue}else if(T+1===y){(r-=3)>-1&&A.push(239,191,189);continue}B=o;continue}if(o<56320){(r-=3)>-1&&A.push(239,191,189),B=o;continue}o=(B-55296<<10|o-56320)+65536}else B&&(r-=3)>-1&&A.push(239,191,189);if(B=null,o<128){if((r-=1)<0)break;A.push(o)}else if(o<2048){if((r-=2)<0)break;A.push(o>>6|192,o&63|128)}else if(o<65536){if((r-=3)<0)break;A.push(o>>12|224,o>>6&63|128,o&63|128)}else if(o<1114112){if((r-=4)<0)break;A.push(o>>18|240,o>>12&63|128,o>>6&63|128,o&63|128)}else throw new Error("Invalid code point")}return A}function lt(l){const r=[];for(let o=0;o<l.length;++o)r.push(l.charCodeAt(o)&255);return r}function ct(l,r){let o,y,B;const A=[];for(let T=0;T<l.length&&!((r-=2)<0);++T)o=l.charCodeAt(T),y=o>>8,B=o%256,A.push(B),A.push(y);return A}function hr(l){return i.toByteArray(ut(l))}function at(l,r,o,y){let B;for(B=0;B<y&&!(B+o>=r.length||B>=l.length);++B)r[B+o]=l[B];return B}function nt(l,r){return l instanceof r||l!=null&&l.constructor!=null&&l.constructor.name!=null&&l.constructor.name===r.name}function nr(l){return l!==l}const dt=function(){const l="0123456789abcdef",r=new Array(256);for(let o=0;o<16;++o){const y=o*16;for(let B=0;B<16;++B)r[y+B]=l[o]+l[B]}return r}();function st(l){return typeof BigInt>"u"?dr:l}function dr(){throw new Error("BigInt not supported")}})(Br);function Oe(f){return Br.Buffer.from(f).toString("base64")}function cn(f){var i=Br.Buffer.from(dn(f),"base64").toString(),e=JSON.parse(i);return e}function dn(f){return f.replace(/-/g,"+").replace(/_/g,"/")}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ne=BigInt(0),_r=BigInt(1),pn=BigInt(2),Ar=f=>f instanceof Uint8Array,gn=Array.from({length:256},(f,i)=>i.toString(16).padStart(2,"0"));function Yt(f){if(!Ar(f))throw new Error("Uint8Array expected");let i="";for(let e=0;e<f.length;e++)i+=gn[f[e]];return i}function Le(f){const i=f.toString(16);return i.length&1?`0${i}`:i}function fe(f){if(typeof f!="string")throw new Error("hex string expected, got "+typeof f);return BigInt(f===""?"0":`0x${f}`)}function ur(f){if(typeof f!="string")throw new Error("hex string expected, got "+typeof f);const i=f.length;if(i%2)throw new Error("padded hex string expected, got unpadded hex of length "+i);const e=new Uint8Array(i/2);for(let a=0;a<e.length;a++){const g=a*2,s=f.slice(g,g+2),v=Number.parseInt(s,16);if(Number.isNaN(v)||v<0)throw new Error("Invalid byte sequence");e[a]=v}return e}function tr(f){return fe(Yt(f))}function ue(f){if(!Ar(f))throw new Error("Uint8Array expected");return fe(Yt(Uint8Array.from(f).reverse()))}function ar(f,i){return ur(f.toString(16).padStart(i*2,"0"))}function ae(f,i){return ar(f,i).reverse()}function mn(f){return ur(Le(f))}function Pt(f,i,e){let a;if(typeof i=="string")try{a=ur(i)}catch(s){throw new Error(`${f} must be valid hex string, got "${i}". Cause: ${s}`)}else if(Ar(i))a=Uint8Array.from(i);else throw new Error(`${f} must be hex string or Uint8Array`);const g=a.length;if(typeof e=="number"&&g!==e)throw new Error(`${f} expected ${e} bytes, got ${g}`);return a}function lr(...f){const i=new Uint8Array(f.reduce((a,g)=>a+g.length,0));let e=0;return f.forEach(a=>{if(!Ar(a))throw new Error("Uint8Array expected");i.set(a,e),e+=a.length}),i}function yn(f,i){if(f.length!==i.length)return!1;for(let e=0;e<f.length;e++)if(f[e]!==i[e])return!1;return!0}function wn(f){if(typeof f!="string")throw new Error(`utf8ToBytes expected string, got ${typeof f}`);return new Uint8Array(new TextEncoder().encode(f))}function vn(f){let i;for(i=0;f>Ne;f>>=_r,i+=1);return i}function xn(f,i){return f>>BigInt(i)&_r}const bn=(f,i,e)=>f|(e?_r:Ne)<<BigInt(i),he=f=>(pn<<BigInt(f-1))-_r,Vr=f=>new Uint8Array(f),xe=f=>Uint8Array.from(f);function qe(f,i,e){if(typeof f!="number"||f<2)throw new Error("hashLen must be a number");if(typeof i!="number"||i<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");let a=Vr(f),g=Vr(f),s=0;const v=()=>{a.fill(1),g.fill(0),s=0},d=(...S)=>e(g,a,...S),_=(S=Vr())=>{g=d(xe([0]),S),a=d(),S.length!==0&&(g=d(xe([1]),S),a=d())},b=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let S=0;const L=[];for(;S<i;){a=d();const C=a.slice();L.push(C),S+=a.length}return lr(...L)};return(S,L)=>{v(),_(S);let C;for(;!(C=L(b()));)_();return v(),C}}const Mn={bigint:f=>typeof f=="bigint",function:f=>typeof f=="function",boolean:f=>typeof f=="boolean",string:f=>typeof f=="string",stringOrUint8Array:f=>typeof f=="string"||f instanceof Uint8Array,isSafeInteger:f=>Number.isSafeInteger(f),array:f=>Array.isArray(f),field:(f,i)=>i.Fp.isValid(f),hash:f=>typeof f=="function"&&Number.isSafeInteger(f.outputLen)};function cr(f,i,e={}){const a=(g,s,v)=>{const d=Mn[s];if(typeof d!="function")throw new Error(`Invalid validator "${s}", expected function`);const _=f[g];if(!(v&&_===void 0)&&!d(_,f))throw new Error(`Invalid param ${String(g)}=${_} (${typeof _}), expected ${s}`)};for(const[g,s]of Object.entries(i))a(g,s,!1);for(const[g,s]of Object.entries(e))a(g,s,!0);return f}const Bn=Object.freeze(Object.defineProperty({__proto__:null,bitGet:xn,bitLen:vn,bitMask:he,bitSet:bn,bytesToHex:Yt,bytesToNumberBE:tr,bytesToNumberLE:ue,concatBytes:lr,createHmacDrbg:qe,ensureBytes:Pt,equalBytes:yn,hexToBytes:ur,hexToNumber:fe,numberToBytesBE:ar,numberToBytesLE:ae,numberToHexUnpadded:Le,numberToVarBytesBE:mn,utf8ToBytes:wn,validateObject:cr},Symbol.toStringTag,{value:"Module"}));function be(f){if(!Number.isSafeInteger(f)||f<0)throw new Error(`Wrong positive integer: ${f}`)}function Ce(f,...i){if(!(f instanceof Uint8Array))throw new Error("Expected Uint8Array");if(i.length>0&&!i.includes(f.length))throw new Error(`Expected Uint8Array of length ${i}, not of length=${f.length}`)}function En(f){if(typeof f!="function"||typeof f.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");be(f.outputLen),be(f.blockLen)}function yr(f,i=!0){if(f.destroyed)throw new Error("Hash instance has been destroyed");if(i&&f.finished)throw new Error("Hash#digest() has already been called")}function _n(f,i){Ce(f);const e=i.outputLen;if(f.length<e)throw new Error(`digestInto() expects output buffer of length at least ${e}`)}const Wr=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const $e=f=>f instanceof Uint8Array,Gr=f=>new DataView(f.buffer,f.byteOffset,f.byteLength),Ht=(f,i)=>f<<32-i|f>>>i,An=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!An)throw new Error("Non little-endian hardware is not supported");function In(f){if(typeof f!="string")throw new Error(`utf8ToBytes expected string, got ${typeof f}`);return new Uint8Array(new TextEncoder().encode(f))}function le(f){if(typeof f=="string"&&(f=In(f)),!$e(f))throw new Error(`expected Uint8Array, got ${typeof f}`);return f}function Sn(...f){const i=new Uint8Array(f.reduce((a,g)=>a+g.length,0));let e=0;return f.forEach(a=>{if(!$e(a))throw new Error("Uint8Array expected");i.set(a,e),e+=a.length}),i}class Pe{clone(){return this._cloneInto()}}function Tn(f){const i=a=>f().update(le(a)).digest(),e=f();return i.outputLen=e.outputLen,i.blockLen=e.blockLen,i.create=()=>f(),i}function Qr(f=32){if(Wr&&typeof Wr.getRandomValues=="function")return Wr.getRandomValues(new Uint8Array(f));throw new Error("crypto.getRandomValues must be defined")}function Un(f,i,e,a){if(typeof f.setBigUint64=="function")return f.setBigUint64(i,e,a);const g=BigInt(32),s=BigInt(4294967295),v=Number(e>>g&s),d=Number(e&s),_=a?4:0,b=a?0:4;f.setUint32(i+_,v,a),f.setUint32(i+b,d,a)}class kn extends Pe{constructor(i,e,a,g){super(),this.blockLen=i,this.outputLen=e,this.padOffset=a,this.isLE=g,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(i),this.view=Gr(this.buffer)}update(i){yr(this);const{view:e,buffer:a,blockLen:g}=this;i=le(i);const s=i.length;for(let v=0;v<s;){const d=Math.min(g-this.pos,s-v);if(d===g){const _=Gr(i);for(;g<=s-v;v+=g)this.process(_,v);continue}a.set(i.subarray(v,v+d),this.pos),this.pos+=d,v+=d,this.pos===g&&(this.process(e,0),this.pos=0)}return this.length+=i.length,this.roundClean(),this}digestInto(i){yr(this),_n(i,this),this.finished=!0;const{buffer:e,view:a,blockLen:g,isLE:s}=this;let{pos:v}=this;e[v++]=128,this.buffer.subarray(v).fill(0),this.padOffset>g-v&&(this.process(a,0),v=0);for(let S=v;S<g;S++)e[S]=0;Un(a,g-8,BigInt(this.length*8),s),this.process(a,0);const d=Gr(i),_=this.outputLen;if(_%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const b=_/4,I=this.get();if(b>I.length)throw new Error("_sha2: outputLen bigger than state");for(let S=0;S<b;S++)d.setUint32(4*S,I[S],s)}digest(){const{buffer:i,outputLen:e}=this;this.digestInto(i);const a=i.slice(0,e);return this.destroy(),a}_cloneInto(i){i||(i=new this.constructor),i.set(...this.get());const{blockLen:e,buffer:a,length:g,finished:s,destroyed:v,pos:d}=this;return i.length=g,i.pos=d,i.finished=s,i.destroyed=v,g%e&&i.buffer.set(a),i}}const Fn=(f,i,e)=>f&i^~f&e,Rn=(f,i,e)=>f&i^f&e^i&e,On=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Wt=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Gt=new Uint32Array(64);class Nn extends kn{constructor(){super(64,32,8,!1),this.A=Wt[0]|0,this.B=Wt[1]|0,this.C=Wt[2]|0,this.D=Wt[3]|0,this.E=Wt[4]|0,this.F=Wt[5]|0,this.G=Wt[6]|0,this.H=Wt[7]|0}get(){const{A:i,B:e,C:a,D:g,E:s,F:v,G:d,H:_}=this;return[i,e,a,g,s,v,d,_]}set(i,e,a,g,s,v,d,_){this.A=i|0,this.B=e|0,this.C=a|0,this.D=g|0,this.E=s|0,this.F=v|0,this.G=d|0,this.H=_|0}process(i,e){for(let S=0;S<16;S++,e+=4)Gt[S]=i.getUint32(e,!1);for(let S=16;S<64;S++){const L=Gt[S-15],C=Gt[S-2],O=Ht(L,7)^Ht(L,18)^L>>>3,U=Ht(C,17)^Ht(C,19)^C>>>10;Gt[S]=U+Gt[S-7]+O+Gt[S-16]|0}let{A:a,B:g,C:s,D:v,E:d,F:_,G:b,H:I}=this;for(let S=0;S<64;S++){const L=Ht(d,6)^Ht(d,11)^Ht(d,25),C=I+L+Fn(d,_,b)+On[S]+Gt[S]|0,U=(Ht(a,2)^Ht(a,13)^Ht(a,22))+Rn(a,g,s)|0;I=b,b=_,_=d,d=v+C|0,v=s,s=g,g=a,a=C+U|0}a=a+this.A|0,g=g+this.B|0,s=s+this.C|0,v=v+this.D|0,d=d+this.E|0,_=_+this.F|0,b=b+this.G|0,I=I+this.H|0,this.set(a,g,s,v,d,_,b,I)}roundClean(){Gt.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const wr=Tn(()=>new Nn);var vr=globalThis&&globalThis.__assign||function(){return vr=Object.assign||function(f){for(var i,e=1,a=arguments.length;e<a;e++){i=arguments[e];for(var g in i)Object.prototype.hasOwnProperty.call(i,g)&&(f[g]=i[g])}return f},vr.apply(this,arguments)},Me=globalThis&&globalThis.__spreadArray||function(f,i,e){if(e||arguments.length===2)for(var a=0,g=i.length,s;a<g;a++)(s||!(a in i))&&(s||(s=Array.prototype.slice.call(i,0,a)),s[a]=i[a]);return f.concat(s||Array.prototype.slice.call(i))};function Ln(f){for(var i=[],e=0;e<32;e++){var a=1<<e;f&a&&i.push(Math.pow(2,e))}return i}function qn(f){return Cn(Yt(f))}function Cn(f){return BigInt("0x".concat(f))}function te(f){var i=["web+cashu://","cashu://","cashu:","cashuA"];return i.forEach(function(e){f.startsWith(e)&&(f=f.slice(e.length))}),$n(f)}function $n(f){var i,e,a=cn(f);return"token"in a?a:Array.isArray(a)?{token:[{proofs:a,mint:""}]}:{token:[{proofs:a.proofs,mint:(e=(i=a==null?void 0:a.mints[0])===null||i===void 0?void 0:i.url)!==null&&e!==void 0?e:""}]}}function pr(f){var i=Object.entries(f).sort(function(a,g){return+a[0]-+g[0]}).map(function(a){var g=a[1];return g}).join(""),e=wr(new TextEncoder().encode(i));return Br.Buffer.from(e).toString("base64").slice(0,12)}function Pn(f){for(var i,e,a={},g=0,s=f.token;g<s.length;g++){var v=s[g];if(!(!(!((e=v==null?void 0:v.proofs)===null||e===void 0)&&e.length)||!(v!=null&&v.mint))){if(a[v.mint]){(i=a[v.mint].proofs).push.apply(i,Me([],v.proofs,!0));continue}a[v.mint]={mint:v.mint,proofs:Me([],v.proofs,!0)}}}return{memo:f==null?void 0:f.memo,token:Object.values(a).map(function(d){return vr(vr({},d),{proofs:Hn(d.proofs)})})}}function Hn(f){return f.sort(function(i,e){return i.id.localeCompare(e.id)})}function sr(f){return typeof f=="object"}function Kn(f){if(sr(f)){if("error"in f&&f.error)throw new Error(f.error);if("detail"in f&&f.detail)throw new Error(f.detail)}}var rr=globalThis&&globalThis.__assign||function(){return rr=Object.assign||function(f){for(var i,e=1,a=arguments.length;e<a;e++){i=arguments[e];for(var g in i)Object.prototype.hasOwnProperty.call(i,g)&&(f[g]=i[g])}return f},rr.apply(this,arguments)},He=globalThis&&globalThis.__awaiter||function(f,i,e,a){function g(s){return s instanceof e?s:new e(function(v){v(s)})}return new(e||(e=Promise))(function(s,v){function d(I){try{b(a.next(I))}catch(S){v(S)}}function _(I){try{b(a.throw(I))}catch(S){v(S)}}function b(I){I.done?s(I.value):g(I.value).then(d,_)}b((a=a.apply(f,i||[])).next())})},Ke=globalThis&&globalThis.__generator||function(f,i){var e={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},a,g,s,v;return v={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function d(b){return function(I){return _([b,I])}}function _(b){if(a)throw new TypeError("Generator is already executing.");for(;v&&(v=0,b[0]&&(e=0)),e;)try{if(a=1,g&&(s=b[0]&2?g.return:b[0]?g.throw||((s=g.return)&&s.call(g),0):g.next)&&!(s=s.call(g,b[1])).done)return s;switch(g=0,s&&(b=[b[0]&2,s.value]),b[0]){case 0:case 1:s=b;break;case 4:return e.label++,{value:b[1],done:!1};case 5:e.label++,g=b[1],b=[0];continue;case 7:b=e.ops.pop(),e.trys.pop();continue;default:if(s=e.trys,!(s=s.length>0&&s[s.length-1])&&(b[0]===6||b[0]===2)){e=0;continue}if(b[0]===3&&(!s||b[1]>s[0]&&b[1]<s[3])){e.label=b[1];break}if(b[0]===6&&e.label<s[1]){e.label=s[1],s=b;break}if(s&&e.label<s[2]){e.label=s[2],e.ops.push(b);break}s[2]&&e.ops.pop(),e.trys.pop();continue}b=i.call(f,e)}catch(I){b=[6,I],g=0}finally{a=s=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},Zn=globalThis&&globalThis.__rest||function(f,i){var e={};for(var a in f)Object.prototype.hasOwnProperty.call(f,a)&&i.indexOf(a)<0&&(e[a]=f[a]);if(f!=null&&typeof Object.getOwnPropertySymbols=="function")for(var g=0,a=Object.getOwnPropertySymbols(f);g<a.length;g++)i.indexOf(a[g])<0&&Object.prototype.propertyIsEnumerable.call(f,a[g])&&(e[a[g]]=f[a[g]]);return e},zn={};function Dn(f){var i=f.endpoint,e=f.requestBody,a=f.headers,g=Zn(f,["endpoint","requestBody","headers"]);return He(this,void 0,void 0,function(){var s,v,d,_,b,I,S;return Ke(this,function(L){switch(L.label){case 0:return s=e?JSON.stringify(e):void 0,v=rr(rr({Accept:"application/json, text/plain, */*"},s?{"Content-Type":"application/json"}:void 0),a),[4,fetch(i,rr({body:s,headers:v},g))];case 1:return d=L.sent(),d.ok?[3,3]:[4,d.json()];case 2:throw _=L.sent(),b=_.error,I=_.detail,S=b||I||"bad response",new Error(S);case 3:return[2,d]}})})}function Dt(f){return He(this,void 0,void 0,function(){var i,e;return Ke(this,function(a){switch(a.label){case 0:return[4,Dn(rr(rr({},f),zn))];case 1:return i=a.sent(),[4,i.json().catch(function(){return{error:"bad response"}})];case 2:return e=a.sent(),Kn(e),[2,e]}})})}var Ft=globalThis&&globalThis.__awaiter||function(f,i,e,a){function g(s){return s instanceof e?s:new e(function(v){v(s)})}return new(e||(e=Promise))(function(s,v){function d(I){try{b(a.next(I))}catch(S){v(S)}}function _(I){try{b(a.throw(I))}catch(S){v(S)}}function b(I){I.done?s(I.value):g(I.value).then(d,_)}b((a=a.apply(f,i||[])).next())})},Rt=globalThis&&globalThis.__generator||function(f,i){var e={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},a,g,s,v;return v={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function d(b){return function(I){return _([b,I])}}function _(b){if(a)throw new TypeError("Generator is already executing.");for(;v&&(v=0,b[0]&&(e=0)),e;)try{if(a=1,g&&(s=b[0]&2?g.return:b[0]?g.throw||((s=g.return)&&s.call(g),0):g.next)&&!(s=s.call(g,b[1])).done)return s;switch(g=0,s&&(b=[b[0]&2,s.value]),b[0]){case 0:case 1:s=b;break;case 4:return e.label++,{value:b[1],done:!1};case 5:e.label++,g=b[1],b=[0];continue;case 7:b=e.ops.pop(),e.trys.pop();continue;default:if(s=e.trys,!(s=s.length>0&&s[s.length-1])&&(b[0]===6||b[0]===2)){e=0;continue}if(b[0]===3&&(!s||b[1]>s[0]&&b[1]<s[3])){e.label=b[1];break}if(b[0]===6&&e.label<s[1]){e.label=s[1],s=b;break}if(s&&e.label<s[2]){e.label=s[2],e.ops.push(b);break}s[2]&&e.ops.pop(),e.trys.pop();continue}b=i.call(f,e)}catch(I){b=[6,I],g=0}finally{a=s=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},Be=function(){function f(i){this._mintUrl=i}return Object.defineProperty(f.prototype,"mintUrl",{get:function(){return this._mintUrl},enumerable:!1,configurable:!0}),f.getInfo=function(i){return Ft(this,void 0,void 0,function(){return Rt(this,function(e){return[2,Dt({endpoint:"".concat(i,"/info")})]})})},f.prototype.getInfo=function(){return Ft(this,void 0,void 0,function(){return Rt(this,function(i){return[2,f.getInfo(this._mintUrl)]})})},f.requestMint=function(i,e){return Ft(this,void 0,void 0,function(){return Rt(this,function(a){return[2,Dt({endpoint:"".concat(i,"/mint?amount=").concat(e)})]})})},f.prototype.requestMint=function(i){return Ft(this,void 0,void 0,function(){return Rt(this,function(e){return[2,f.requestMint(this._mintUrl,i)]})})},f.mint=function(i,e,a){return Ft(this,void 0,void 0,function(){var g;return Rt(this,function(s){switch(s.label){case 0:return[4,Dt({endpoint:"".concat(i,"/mint?hash=").concat(a),method:"POST",requestBody:e})];case 1:if(g=s.sent(),!sr(g)||!Array.isArray(g==null?void 0:g.promises))throw new Error("bad response");return[2,g]}})})},f.prototype.mint=function(i,e){return Ft(this,void 0,void 0,function(){return Rt(this,function(a){return[2,f.mint(this._mintUrl,i,e)]})})},f.getKeys=function(i,e){return Ft(this,void 0,void 0,function(){return Rt(this,function(a){return e&&(e=e.replace(/\//g,"_").replace(/\+/g,"-")),[2,Dt({endpoint:"".concat(i,"/keys").concat(e?"/".concat(e):"")})]})})},f.prototype.getKeys=function(i){return Ft(this,void 0,void 0,function(){return Rt(this,function(e){return[2,f.getKeys(this._mintUrl,i)]})})},f.getKeySets=function(i){return Ft(this,void 0,void 0,function(){return Rt(this,function(e){return[2,Dt({endpoint:"".concat(i,"/keysets")})]})})},f.prototype.getKeySets=function(){return Ft(this,void 0,void 0,function(){return Rt(this,function(i){return[2,f.getKeySets(this._mintUrl)]})})},f.split=function(i,e){return Ft(this,void 0,void 0,function(){var a;return Rt(this,function(g){switch(g.label){case 0:return[4,Dt({endpoint:"".concat(i,"/split"),method:"POST",requestBody:e})];case 1:if(a=g.sent(),!sr(a)||!Array.isArray(a==null?void 0:a.fst)||!Array.isArray(a==null?void 0:a.snd))throw new Error("bad response");return[2,a]}})})},f.prototype.split=function(i){return Ft(this,void 0,void 0,function(){return Rt(this,function(e){return[2,f.split(this._mintUrl,i)]})})},f.melt=function(i,e){return Ft(this,void 0,void 0,function(){var a;return Rt(this,function(g){switch(g.label){case 0:return[4,Dt({endpoint:"".concat(i,"/melt"),method:"POST",requestBody:e})];case 1:if(a=g.sent(),!sr(a)||typeof(a==null?void 0:a.paid)!="boolean"||(a==null?void 0:a.preimage)!==null&&typeof(a==null?void 0:a.preimage)!="string")throw new Error("bad response");return[2,a]}})})},f.prototype.melt=function(i){return Ft(this,void 0,void 0,function(){return Rt(this,function(e){return[2,f.melt(this._mintUrl,i)]})})},f.checkFees=function(i,e){return Ft(this,void 0,void 0,function(){var a;return Rt(this,function(g){switch(g.label){case 0:return[4,Dt({endpoint:"".concat(i,"/checkfees"),method:"POST",requestBody:e})];case 1:if(a=g.sent(),!sr(a)||typeof(a==null?void 0:a.fee)!="number")throw new Error("bad response");return[2,a]}})})},f.prototype.checkFees=function(i){return Ft(this,void 0,void 0,function(){return Rt(this,function(e){return[2,f.checkFees(this._mintUrl,i)]})})},f.check=function(i,e){return Ft(this,void 0,void 0,function(){var a;return Rt(this,function(g){switch(g.label){case 0:return[4,Dt({endpoint:"".concat(i,"/check"),method:"POST",requestBody:e})];case 1:if(a=g.sent(),!sr(a)||!Array.isArray(a==null?void 0:a.spendable))throw new Error("bad response");return[2,a]}})})},f.prototype.check=function(i){return Ft(this,void 0,void 0,function(){return Rt(this,function(e){return[2,f.check(this._mintUrl,i)]})})},f}();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ot=BigInt(0),pt=BigInt(1),Jt=BigInt(2),jn=BigInt(3),re=BigInt(4),Ee=BigInt(5),_e=BigInt(8);BigInt(9);BigInt(16);function Lt(f,i){const e=f%i;return e>=Ot?e:i+e}function Vn(f,i,e){if(e<=Ot||i<Ot)throw new Error("Expected power/modulo > 0");if(e===pt)return Ot;let a=pt;for(;i>Ot;)i&pt&&(a=a*f%e),f=f*f%e,i>>=pt;return a}function qt(f,i,e){let a=f;for(;i-- >Ot;)a*=a,a%=e;return a}function ee(f,i){if(f===Ot||i<=Ot)throw new Error(`invert: expected positive integers, got n=${f} mod=${i}`);let e=Lt(f,i),a=i,g=Ot,s=pt;for(;e!==Ot;){const d=a/e,_=a%e,b=g-s*d;a=e,e=_,g=s,s=b}if(a!==pt)throw new Error("invert: does not exist");return Lt(g,i)}function Wn(f){const i=(f-pt)/Jt;let e,a,g;for(e=f-pt,a=0;e%Jt===Ot;e/=Jt,a++);for(g=Jt;g<f&&Vn(g,i,f)!==f-pt;g++);if(a===1){const v=(f+pt)/re;return function(_,b){const I=_.pow(b,v);if(!_.eql(_.sqr(I),b))throw new Error("Cannot find square root");return I}}const s=(e+pt)/Jt;return function(d,_){if(d.pow(_,i)===d.neg(d.ONE))throw new Error("Cannot find square root");let b=a,I=d.pow(d.mul(d.ONE,g),e),S=d.pow(_,s),L=d.pow(_,e);for(;!d.eql(L,d.ONE);){if(d.eql(L,d.ZERO))return d.ZERO;let C=1;for(let U=d.sqr(L);C<b&&!d.eql(U,d.ONE);C++)U=d.sqr(U);const O=d.pow(I,pt<<BigInt(b-C-1));I=d.sqr(O),S=d.mul(S,O),L=d.mul(L,I),b=C}return S}}function Gn(f){if(f%re===jn){const i=(f+pt)/re;return function(a,g){const s=a.pow(g,i);if(!a.eql(a.sqr(s),g))throw new Error("Cannot find square root");return s}}if(f%_e===Ee){const i=(f-Ee)/_e;return function(a,g){const s=a.mul(g,Jt),v=a.pow(s,i),d=a.mul(g,v),_=a.mul(a.mul(d,Jt),v),b=a.mul(d,a.sub(_,a.ONE));if(!a.eql(a.sqr(b),g))throw new Error("Cannot find square root");return b}}return Wn(f)}const Yn=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Xn(f){const i={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},e=Yn.reduce((a,g)=>(a[g]="function",a),i);return cr(f,e)}function Jn(f,i,e){if(e<Ot)throw new Error("Expected power > 0");if(e===Ot)return f.ONE;if(e===pt)return i;let a=f.ONE,g=i;for(;e>Ot;)e&pt&&(a=f.mul(a,g)),g=f.sqr(g),e>>=pt;return a}function Qn(f,i){const e=new Array(i.length),a=i.reduce((s,v,d)=>f.is0(v)?s:(e[d]=s,f.mul(s,v)),f.ONE),g=f.inv(a);return i.reduceRight((s,v,d)=>f.is0(v)?s:(e[d]=f.mul(s,e[d]),f.mul(s,v)),g),e}function Ze(f,i){const e=i!==void 0?i:f.toString(2).length,a=Math.ceil(e/8);return{nBitLength:e,nByteLength:a}}function ti(f,i,e=!1,a={}){if(f<=Ot)throw new Error(`Expected Field ORDER > 0, got ${f}`);const{nBitLength:g,nByteLength:s}=Ze(f,i);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const v=Gn(f),d=Object.freeze({ORDER:f,BITS:g,BYTES:s,MASK:he(g),ZERO:Ot,ONE:pt,create:_=>Lt(_,f),isValid:_=>{if(typeof _!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof _}`);return Ot<=_&&_<f},is0:_=>_===Ot,isOdd:_=>(_&pt)===pt,neg:_=>Lt(-_,f),eql:(_,b)=>_===b,sqr:_=>Lt(_*_,f),add:(_,b)=>Lt(_+b,f),sub:(_,b)=>Lt(_-b,f),mul:(_,b)=>Lt(_*b,f),pow:(_,b)=>Jn(d,_,b),div:(_,b)=>Lt(_*ee(b,f),f),sqrN:_=>_*_,addN:(_,b)=>_+b,subN:(_,b)=>_-b,mulN:(_,b)=>_*b,inv:_=>ee(_,f),sqrt:a.sqrt||(_=>v(d,_)),invertBatch:_=>Qn(d,_),cmov:(_,b,I)=>I?b:_,toBytes:_=>e?ae(_,s):ar(_,s),fromBytes:_=>{if(_.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${_.length}`);return e?ue(_):tr(_)}});return Object.freeze(d)}function ze(f){if(typeof f!="bigint")throw new Error("field order must be bigint");const i=f.toString(2).length;return Math.ceil(i/8)}function De(f){const i=ze(f);return i+Math.ceil(i/2)}function ri(f,i,e=!1){const a=f.length,g=ze(i),s=De(i);if(a<16||a<s||a>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${a}`);const v=e?tr(f):ue(f),d=Lt(v,i-pt)+pt;return e?ae(d,g):ar(d,g)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ei=BigInt(0),Yr=BigInt(1);function ni(f,i){const e=(g,s)=>{const v=s.negate();return g?v:s},a=g=>{const s=Math.ceil(i/g)+1,v=2**(g-1);return{windows:s,windowSize:v}};return{constTimeNegate:e,unsafeLadder(g,s){let v=f.ZERO,d=g;for(;s>ei;)s&Yr&&(v=v.add(d)),d=d.double(),s>>=Yr;return v},precomputeWindow(g,s){const{windows:v,windowSize:d}=a(s),_=[];let b=g,I=b;for(let S=0;S<v;S++){I=b,_.push(I);for(let L=1;L<d;L++)I=I.add(b),_.push(I);b=I.double()}return _},wNAF(g,s,v){const{windows:d,windowSize:_}=a(g);let b=f.ZERO,I=f.BASE;const S=BigInt(2**g-1),L=2**g,C=BigInt(g);for(let O=0;O<d;O++){const U=O*_;let F=Number(v&S);v>>=C,F>_&&(F-=L,v+=Yr);const R=U,$=U+Math.abs(F)-1,z=O%2!==0,j=F<0;F===0?I=I.add(e(z,s[R])):b=b.add(e(j,s[$]))}return{p:b,f:I}},wNAFCached(g,s,v,d){const _=g._WINDOW_SIZE||1;let b=s.get(g);return b||(b=this.precomputeWindow(g,_),_!==1&&s.set(g,d(b))),this.wNAF(_,b,v)}}}function je(f){return Xn(f.Fp),cr(f,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Ze(f.n,f.nBitLength),...f,p:f.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function ii(f){const i=je(f);cr(i,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:e,Fp:a,a:g}=i;if(e){if(!a.eql(g,a.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof e!="object"||typeof e.beta!="bigint"||typeof e.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...i})}const{bytesToNumberBE:oi,hexToBytes:si}=Bn,Qt={Err:class extends Error{constructor(i=""){super(i)}},_parseInt(f){const{Err:i}=Qt;if(f.length<2||f[0]!==2)throw new i("Invalid signature integer tag");const e=f[1],a=f.subarray(2,e+2);if(!e||a.length!==e)throw new i("Invalid signature integer: wrong length");if(a[0]&128)throw new i("Invalid signature integer: negative");if(a[0]===0&&!(a[1]&128))throw new i("Invalid signature integer: unnecessary leading zero");return{d:oi(a),l:f.subarray(e+2)}},toSig(f){const{Err:i}=Qt,e=typeof f=="string"?si(f):f;if(!(e instanceof Uint8Array))throw new Error("ui8a expected");let a=e.length;if(a<2||e[0]!=48)throw new i("Invalid signature tag");if(e[1]!==a-2)throw new i("Invalid signature: incorrect length");const{d:g,l:s}=Qt._parseInt(e.subarray(2)),{d:v,l:d}=Qt._parseInt(s);if(d.length)throw new i("Invalid signature: left bytes after parsing");return{r:g,s:v}},hexFromSig(f){const i=b=>Number.parseInt(b[0],16)&8?"00"+b:b,e=b=>{const I=b.toString(16);return I.length&1?`0${I}`:I},a=i(e(f.s)),g=i(e(f.r)),s=a.length/2,v=g.length/2,d=e(s),_=e(v);return`30${e(v+s+4)}02${_}${g}02${d}${a}`}},Vt=BigInt(0),$t=BigInt(1);BigInt(2);const Ae=BigInt(3);BigInt(4);function fi(f){const i=ii(f),{Fp:e}=i,a=i.toBytes||((O,U,F)=>{const R=U.toAffine();return lr(Uint8Array.from([4]),e.toBytes(R.x),e.toBytes(R.y))}),g=i.fromBytes||(O=>{const U=O.subarray(1),F=e.fromBytes(U.subarray(0,e.BYTES)),R=e.fromBytes(U.subarray(e.BYTES,2*e.BYTES));return{x:F,y:R}});function s(O){const{a:U,b:F}=i,R=e.sqr(O),$=e.mul(R,O);return e.add(e.add($,e.mul(O,U)),F)}if(!e.eql(e.sqr(i.Gy),s(i.Gx)))throw new Error("bad generator point: equation left != right");function v(O){return typeof O=="bigint"&&Vt<O&&O<i.n}function d(O){if(!v(O))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function _(O){const{allowedPrivateKeyLengths:U,nByteLength:F,wrapPrivateKey:R,n:$}=i;if(U&&typeof O!="bigint"){if(O instanceof Uint8Array&&(O=Yt(O)),typeof O!="string"||!U.includes(O.length))throw new Error("Invalid key");O=O.padStart(F*2,"0")}let z;try{z=typeof O=="bigint"?O:tr(Pt("private key",O,F))}catch{throw new Error(`private key must be ${F} bytes, hex or bigint, not ${typeof O}`)}return R&&(z=Lt(z,$)),d(z),z}const b=new Map;function I(O){if(!(O instanceof S))throw new Error("ProjectivePoint expected")}class S{constructor(U,F,R){if(this.px=U,this.py=F,this.pz=R,U==null||!e.isValid(U))throw new Error("x required");if(F==null||!e.isValid(F))throw new Error("y required");if(R==null||!e.isValid(R))throw new Error("z required")}static fromAffine(U){const{x:F,y:R}=U||{};if(!U||!e.isValid(F)||!e.isValid(R))throw new Error("invalid affine point");if(U instanceof S)throw new Error("projective point not allowed");const $=z=>e.eql(z,e.ZERO);return $(F)&&$(R)?S.ZERO:new S(F,R,e.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(U){const F=e.invertBatch(U.map(R=>R.pz));return U.map((R,$)=>R.toAffine(F[$])).map(S.fromAffine)}static fromHex(U){const F=S.fromAffine(g(Pt("pointHex",U)));return F.assertValidity(),F}static fromPrivateKey(U){return S.BASE.multiply(_(U))}_setWindowSize(U){this._WINDOW_SIZE=U,b.delete(this)}assertValidity(){if(this.is0()){if(i.allowInfinityPoint&&!e.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:U,y:F}=this.toAffine();if(!e.isValid(U)||!e.isValid(F))throw new Error("bad point: x or y not FE");const R=e.sqr(F),$=s(U);if(!e.eql(R,$))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:U}=this.toAffine();if(e.isOdd)return!e.isOdd(U);throw new Error("Field doesn't support isOdd")}equals(U){I(U);const{px:F,py:R,pz:$}=this,{px:z,py:j,pz:Z}=U,P=e.eql(e.mul(F,Z),e.mul(z,$)),H=e.eql(e.mul(R,Z),e.mul(j,$));return P&&H}negate(){return new S(this.px,e.neg(this.py),this.pz)}double(){const{a:U,b:F}=i,R=e.mul(F,Ae),{px:$,py:z,pz:j}=this;let Z=e.ZERO,P=e.ZERO,H=e.ZERO,V=e.mul($,$),G=e.mul(z,z),Q=e.mul(j,j),x=e.mul($,z);return x=e.add(x,x),H=e.mul($,j),H=e.add(H,H),Z=e.mul(U,H),P=e.mul(R,Q),P=e.add(Z,P),Z=e.sub(G,P),P=e.add(G,P),P=e.mul(Z,P),Z=e.mul(x,Z),H=e.mul(R,H),Q=e.mul(U,Q),x=e.sub(V,Q),x=e.mul(U,x),x=e.add(x,H),H=e.add(V,V),V=e.add(H,V),V=e.add(V,Q),V=e.mul(V,x),P=e.add(P,V),Q=e.mul(z,j),Q=e.add(Q,Q),V=e.mul(Q,x),Z=e.sub(Z,V),H=e.mul(Q,G),H=e.add(H,H),H=e.add(H,H),new S(Z,P,H)}add(U){I(U);const{px:F,py:R,pz:$}=this,{px:z,py:j,pz:Z}=U;let P=e.ZERO,H=e.ZERO,V=e.ZERO;const G=i.a,Q=e.mul(i.b,Ae);let x=e.mul(F,z),t=e.mul(R,j),u=e.mul($,Z),c=e.add(F,R),h=e.add(z,j);c=e.mul(c,h),h=e.add(x,t),c=e.sub(c,h),h=e.add(F,$);let p=e.add(z,Z);return h=e.mul(h,p),p=e.add(x,u),h=e.sub(h,p),p=e.add(R,$),P=e.add(j,Z),p=e.mul(p,P),P=e.add(t,u),p=e.sub(p,P),V=e.mul(G,h),P=e.mul(Q,u),V=e.add(P,V),P=e.sub(t,V),V=e.add(t,V),H=e.mul(P,V),t=e.add(x,x),t=e.add(t,x),u=e.mul(G,u),h=e.mul(Q,h),t=e.add(t,u),u=e.sub(x,u),u=e.mul(G,u),h=e.add(h,u),x=e.mul(t,h),H=e.add(H,x),x=e.mul(p,h),P=e.mul(c,P),P=e.sub(P,x),x=e.mul(c,t),V=e.mul(p,V),V=e.add(V,x),new S(P,H,V)}subtract(U){return this.add(U.negate())}is0(){return this.equals(S.ZERO)}wNAF(U){return C.wNAFCached(this,b,U,F=>{const R=e.invertBatch(F.map($=>$.pz));return F.map(($,z)=>$.toAffine(R[z])).map(S.fromAffine)})}multiplyUnsafe(U){const F=S.ZERO;if(U===Vt)return F;if(d(U),U===$t)return this;const{endo:R}=i;if(!R)return C.unsafeLadder(this,U);let{k1neg:$,k1:z,k2neg:j,k2:Z}=R.splitScalar(U),P=F,H=F,V=this;for(;z>Vt||Z>Vt;)z&$t&&(P=P.add(V)),Z&$t&&(H=H.add(V)),V=V.double(),z>>=$t,Z>>=$t;return $&&(P=P.negate()),j&&(H=H.negate()),H=new S(e.mul(H.px,R.beta),H.py,H.pz),P.add(H)}multiply(U){d(U);let F=U,R,$;const{endo:z}=i;if(z){const{k1neg:j,k1:Z,k2neg:P,k2:H}=z.splitScalar(F);let{p:V,f:G}=this.wNAF(Z),{p:Q,f:x}=this.wNAF(H);V=C.constTimeNegate(j,V),Q=C.constTimeNegate(P,Q),Q=new S(e.mul(Q.px,z.beta),Q.py,Q.pz),R=V.add(Q),$=G.add(x)}else{const{p:j,f:Z}=this.wNAF(F);R=j,$=Z}return S.normalizeZ([R,$])[0]}multiplyAndAddUnsafe(U,F,R){const $=S.BASE,z=(Z,P)=>P===Vt||P===$t||!Z.equals($)?Z.multiplyUnsafe(P):Z.multiply(P),j=z(this,F).add(z(U,R));return j.is0()?void 0:j}toAffine(U){const{px:F,py:R,pz:$}=this,z=this.is0();U==null&&(U=z?e.ONE:e.inv($));const j=e.mul(F,U),Z=e.mul(R,U),P=e.mul($,U);if(z)return{x:e.ZERO,y:e.ZERO};if(!e.eql(P,e.ONE))throw new Error("invZ was invalid");return{x:j,y:Z}}isTorsionFree(){const{h:U,isTorsionFree:F}=i;if(U===$t)return!0;if(F)return F(S,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:U,clearCofactor:F}=i;return U===$t?this:F?F(S,this):this.multiplyUnsafe(i.h)}toRawBytes(U=!0){return this.assertValidity(),a(S,this,U)}toHex(U=!0){return Yt(this.toRawBytes(U))}}S.BASE=new S(i.Gx,i.Gy,e.ONE),S.ZERO=new S(e.ZERO,e.ONE,e.ZERO);const L=i.nBitLength,C=ni(S,i.endo?Math.ceil(L/2):L);return{CURVE:i,ProjectivePoint:S,normPrivateKeyToScalar:_,weierstrassEquation:s,isWithinCurveOrder:v}}function ui(f){const i=je(f);return cr(i,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...i})}function ai(f){const i=ui(f),{Fp:e,n:a}=i,g=e.BYTES+1,s=2*e.BYTES+1;function v(h){return Vt<h&&h<e.ORDER}function d(h){return Lt(h,a)}function _(h){return ee(h,a)}const{ProjectivePoint:b,normPrivateKeyToScalar:I,weierstrassEquation:S,isWithinCurveOrder:L}=fi({...i,toBytes(h,p,M){const E=p.toAffine(),m=e.toBytes(E.x),n=lr;return M?n(Uint8Array.from([p.hasEvenY()?2:3]),m):n(Uint8Array.from([4]),m,e.toBytes(E.y))},fromBytes(h){const p=h.length,M=h[0],E=h.subarray(1);if(p===g&&(M===2||M===3)){const m=tr(E);if(!v(m))throw new Error("Point is not on curve");const n=S(m);let w=e.sqrt(n);const k=(w&$t)===$t;return(M&1)===1!==k&&(w=e.neg(w)),{x:m,y:w}}else if(p===s&&M===4){const m=e.fromBytes(E.subarray(0,e.BYTES)),n=e.fromBytes(E.subarray(e.BYTES,2*e.BYTES));return{x:m,y:n}}else throw new Error(`Point of length ${p} was invalid. Expected ${g} compressed bytes or ${s} uncompressed bytes`)}}),C=h=>Yt(ar(h,i.nByteLength));function O(h){const p=a>>$t;return h>p}function U(h){return O(h)?d(-h):h}const F=(h,p,M)=>tr(h.slice(p,M));class R{constructor(p,M,E){this.r=p,this.s=M,this.recovery=E,this.assertValidity()}static fromCompact(p){const M=i.nByteLength;return p=Pt("compactSignature",p,M*2),new R(F(p,0,M),F(p,M,2*M))}static fromDER(p){const{r:M,s:E}=Qt.toSig(Pt("DER",p));return new R(M,E)}assertValidity(){if(!L(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!L(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(p){return new R(this.r,this.s,p)}recoverPublicKey(p){const{r:M,s:E,recovery:m}=this,n=H(Pt("msgHash",p));if(m==null||![0,1,2,3].includes(m))throw new Error("recovery id invalid");const w=m===2||m===3?M+i.n:M;if(w>=e.ORDER)throw new Error("recovery id 2 or 3 invalid");const k=m&1?"03":"02",N=b.fromHex(k+C(w)),q=_(w),D=d(-n*q),X=d(E*q),tt=b.BASE.multiplyAndAddUnsafe(N,D,X);if(!tt)throw new Error("point at infinify");return tt.assertValidity(),tt}hasHighS(){return O(this.s)}normalizeS(){return this.hasHighS()?new R(this.r,d(-this.s),this.recovery):this}toDERRawBytes(){return ur(this.toDERHex())}toDERHex(){return Qt.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return ur(this.toCompactHex())}toCompactHex(){return C(this.r)+C(this.s)}}const $={isValidPrivateKey(h){try{return I(h),!0}catch{return!1}},normPrivateKeyToScalar:I,randomPrivateKey:()=>{const h=De(i.n);return ri(i.randomBytes(h),i.n)},precompute(h=8,p=b.BASE){return p._setWindowSize(h),p.multiply(BigInt(3)),p}};function z(h,p=!0){return b.fromPrivateKey(h).toRawBytes(p)}function j(h){const p=h instanceof Uint8Array,M=typeof h=="string",E=(p||M)&&h.length;return p?E===g||E===s:M?E===2*g||E===2*s:h instanceof b}function Z(h,p,M=!0){if(j(h))throw new Error("first arg must be private key");if(!j(p))throw new Error("second arg must be public key");return b.fromHex(p).multiply(I(h)).toRawBytes(M)}const P=i.bits2int||function(h){const p=tr(h),M=h.length*8-i.nBitLength;return M>0?p>>BigInt(M):p},H=i.bits2int_modN||function(h){return d(P(h))},V=he(i.nBitLength);function G(h){if(typeof h!="bigint")throw new Error("bigint expected");if(!(Vt<=h&&h<V))throw new Error(`bigint expected < 2^${i.nBitLength}`);return ar(h,i.nByteLength)}function Q(h,p,M=x){if(["recovered","canonical"].some(rt=>rt in M))throw new Error("sign() legacy options not supported");const{hash:E,randomBytes:m}=i;let{lowS:n,prehash:w,extraEntropy:k}=M;n==null&&(n=!0),h=Pt("msgHash",h),w&&(h=Pt("prehashed msgHash",E(h)));const N=H(h),q=I(p),D=[G(q),G(N)];if(k!=null){const rt=k===!0?m(e.BYTES):k;D.push(Pt("extraEntropy",rt))}const X=lr(...D),tt=N;function kt(rt){const et=P(rt);if(!L(et))return;const Xt=_(et),it=b.BASE.multiply(et).toAffine(),J=d(it.x);if(J===Vt)return;const Nt=d(Xt*d(tt+J*q));if(Nt===Vt)return;let ft=(it.x===J?0:2)|Number(it.y&$t),ut=Nt;return n&&O(Nt)&&(ut=U(Nt),ft^=1),new R(J,ut,ft)}return{seed:X,k2sig:kt}}const x={lowS:i.lowS,prehash:!1},t={lowS:i.lowS,prehash:!1};function u(h,p,M=x){const{seed:E,k2sig:m}=Q(h,p,M),n=i;return qe(n.hash.outputLen,n.nByteLength,n.hmac)(E,m)}b.BASE._setWindowSize(8);function c(h,p,M,E=t){var it;const m=h;if(p=Pt("msgHash",p),M=Pt("publicKey",M),"strict"in E)throw new Error("options.strict was renamed to lowS");const{lowS:n,prehash:w}=E;let k,N;try{if(typeof m=="string"||m instanceof Uint8Array)try{k=R.fromDER(m)}catch(J){if(!(J instanceof Qt.Err))throw J;k=R.fromCompact(m)}else if(typeof m=="object"&&typeof m.r=="bigint"&&typeof m.s=="bigint"){const{r:J,s:Nt}=m;k=new R(J,Nt)}else throw new Error("PARSE");N=b.fromHex(M)}catch(J){if(J.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(n&&k.hasHighS())return!1;w&&(p=i.hash(p));const{r:q,s:D}=k,X=H(p),tt=_(D),kt=d(X*tt),rt=d(q*tt),et=(it=b.BASE.multiplyAndAddUnsafe(N,kt,rt))==null?void 0:it.toAffine();return et?d(et.x)===q:!1}return{CURVE:i,getPublicKey:z,getSharedSecret:Z,sign:u,verify:c,ProjectivePoint:b,Signature:R,utils:$}}class Ve extends Pe{constructor(i,e){super(),this.finished=!1,this.destroyed=!1,En(i);const a=le(e);if(this.iHash=i.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const g=this.blockLen,s=new Uint8Array(g);s.set(a.length>g?i.create().update(a).digest():a);for(let v=0;v<s.length;v++)s[v]^=54;this.iHash.update(s),this.oHash=i.create();for(let v=0;v<s.length;v++)s[v]^=106;this.oHash.update(s),s.fill(0)}update(i){return yr(this),this.iHash.update(i),this}digestInto(i){yr(this),Ce(i,this.outputLen),this.finished=!0,this.iHash.digestInto(i),this.oHash.update(i),this.oHash.digestInto(i),this.destroy()}digest(){const i=new Uint8Array(this.oHash.outputLen);return this.digestInto(i),i}_cloneInto(i){i||(i=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:a,finished:g,destroyed:s,blockLen:v,outputLen:d}=this;return i=i,i.finished=g,i.destroyed=s,i.blockLen=v,i.outputLen=d,i.oHash=e._cloneInto(i.oHash),i.iHash=a._cloneInto(i.iHash),i}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const We=(f,i,e)=>new Ve(f,i).update(e).digest();We.create=(f,i)=>new Ve(f,i);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function hi(f){return{hash:f,hmac:(i,...e)=>We(f,i,Sn(...e)),randomBytes:Qr}}function li(f,i){const e=a=>ai({...f,...hi(a)});return Object.freeze({...e(i),create:e})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ge=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Ie=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),ci=BigInt(1),ne=BigInt(2),Se=(f,i)=>(f+i/ne)/i;function di(f){const i=Ge,e=BigInt(3),a=BigInt(6),g=BigInt(11),s=BigInt(22),v=BigInt(23),d=BigInt(44),_=BigInt(88),b=f*f*f%i,I=b*b*f%i,S=qt(I,e,i)*I%i,L=qt(S,e,i)*I%i,C=qt(L,ne,i)*b%i,O=qt(C,g,i)*C%i,U=qt(O,s,i)*O%i,F=qt(U,d,i)*U%i,R=qt(F,_,i)*F%i,$=qt(R,d,i)*U%i,z=qt($,e,i)*I%i,j=qt(z,v,i)*O%i,Z=qt(j,a,i)*b%i,P=qt(Z,ne,i);if(!ie.eql(ie.sqr(P),f))throw new Error("Cannot find square root");return P}const ie=ti(Ge,void 0,void 0,{sqrt:di}),xr=li({a:BigInt(0),b:BigInt(7),Fp:ie,n:Ie,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:f=>{const i=Ie,e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),a=-ci*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),g=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=e,v=BigInt("0x100000000000000000000000000000000"),d=Se(s*f,i),_=Se(-a*f,i);let b=Lt(f-d*e-_*g,i),I=Lt(-d*a-_*s,i);const S=b>v,L=I>v;if(S&&(b=i-b),L&&(I=i-I),b>v||I>v)throw new Error("splitScalar: Endomorphism failed, k="+f);return{k1neg:S,k1:b,k2neg:L,k2:I}}}},wr);BigInt(0);xr.ProjectivePoint;function Ye(f){for(var i;!i;){var e=wr(f),a=Yt(e),g="02"+a;try{i=br(g)}catch{f=wr(f)}}return i}function br(f){return xr.ProjectivePoint.fromHex(f)}function oe(f,i){var e=Oe(f),a=new TextEncoder().encode(e),g=Ye(a);i||(i=qn(xr.utils.randomPrivateKey()));var s=xr.ProjectivePoint.BASE.multiply(i),v=g.add(s);return{B_:v,r:i}}function Xe(f,i,e){var a=f.subtract(e.multiply(i));return a}function pi(f,i,e,a){return f.map(function(g,s){var v=br(g.C_),d=br(a[g.amount]),_=Xe(v,i[s],d),b={id:g.id,amount:g.amount,secret:Oe(e[s]),C:_.toHex(!0)};return b})}const or=Object.freeze(Object.defineProperty({__proto__:null,blindMessage:oe,constructProofs:pi,hashToCurve:Ye,pointFromHex:br,unblindSignature:Xe},Symbol.toStringTag,{value:"Module"}));var Te=function(){function f(i,e){this.amount=i,this.B_=e}return f.prototype.getSerializedBlindedMessage=function(){return{amount:this.amount,B_:this.B_.toHex(!0)}},f}(),Mr=globalThis&&globalThis.__assign||function(){return Mr=Object.assign||function(f){for(var i,e=1,a=arguments.length;e<a;e++){i=arguments[e];for(var g in i)Object.prototype.hasOwnProperty.call(i,g)&&(f[g]=i[g])}return f},Mr.apply(this,arguments)},Kt=globalThis&&globalThis.__awaiter||function(f,i,e,a){function g(s){return s instanceof e?s:new e(function(v){v(s)})}return new(e||(e=Promise))(function(s,v){function d(I){try{b(a.next(I))}catch(S){v(S)}}function _(I){try{b(a.throw(I))}catch(S){v(S)}}function b(I){I.done?s(I.value):g(I.value).then(d,_)}b((a=a.apply(f,i||[])).next())})},Zt=globalThis&&globalThis.__generator||function(f,i){var e={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},a,g,s,v;return v={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function d(b){return function(I){return _([b,I])}}function _(b){if(a)throw new TypeError("Generator is already executing.");for(;v&&(v=0,b[0]&&(e=0)),e;)try{if(a=1,g&&(s=b[0]&2?g.return:b[0]?g.throw||((s=g.return)&&s.call(g),0):g.next)&&!(s=s.call(g,b[1])).done)return s;switch(g=0,s&&(b=[b[0]&2,s.value]),b[0]){case 0:case 1:s=b;break;case 4:return e.label++,{value:b[1],done:!1};case 5:e.label++,g=b[1],b=[0];continue;case 7:b=e.ops.pop(),e.trys.pop();continue;default:if(s=e.trys,!(s=s.length>0&&s[s.length-1])&&(b[0]===6||b[0]===2)){e=0;continue}if(b[0]===3&&(!s||b[1]>s[0]&&b[1]<s[3])){e.label=b[1];break}if(b[0]===6&&e.label<s[1]){e.label=s[1],s=b;break}if(s&&e.label<s[2]){e.label=s[2],e.ops.push(b);break}s[2]&&e.ops.pop(),e.trys.pop();continue}b=i.call(f,e)}catch(I){b=[6,I],g=0}finally{a=s=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},jt=globalThis&&globalThis.__spreadArray||function(f,i,e){if(e||arguments.length===2)for(var a=0,g=i.length,s;a<g;a++)(s||!(a in i))&&(s||(s=Array.prototype.slice.call(i,0,a)),s[a]=i[a]);return f.concat(s||Array.prototype.slice.call(i))};(function(){function f(i,e){this._keysetId="",this._keys=e||{},this.mint=i,e&&(this._keysetId=pr(this._keys))}return Object.defineProperty(f.prototype,"keys",{get:function(){return this._keys},set:function(i){this._keys=i,this._keysetId=pr(this._keys)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"keysetId",{get:function(){return this._keysetId},enumerable:!1,configurable:!0}),f.prototype.checkProofsSpent=function(i){return Kt(this,void 0,void 0,function(){var e,a;return Zt(this,function(g){switch(g.label){case 0:return e={proofs:i.map(function(s){return{secret:s.secret}})},[4,this.mint.check(e)];case 1:return a=g.sent().spendable,[2,i.filter(function(s,v){return!a[v]})]}})})},f.prototype.requestMint=function(i){return this.mint.requestMint(i)},f.prototype.payLnInvoice=function(i,e,a){var g;return Kt(this,void 0,void 0,function(){var s,v,d,_,b,I,S,L,C,O,U;return Zt(this,function(F){switch(F.label){case 0:return s=this.createPaymentPayload(i,e),a?[3,2]:[4,this.getFee(i)];case 1:a=F.sent(),F.label=2;case 2:return v=this.createBlankOutputs(a),d=v.blindedMessages,_=v.secrets,b=v.rs,[4,this.mint.melt(Mr(Mr({},s),{outputs:d}))];case 3:return I=F.sent(),U={isPaid:(g=I.paid)!==null&&g!==void 0?g:!1,preimage:I.preimage},I!=null&&I.change?(C=(L=or).constructProofs,O=[I.change,b,_],[4,this.getKeys(I.change)]):[3,5];case 4:return S=C.apply(L,O.concat([F.sent()])),[3,6];case 5:S=[],F.label=6;case 6:return U.change=S,[4,this.changedKeys(I==null?void 0:I.change)];case 7:return[2,(U.newKeys=F.sent(),U)]}})})},f.prototype.getFee=function(i){return Kt(this,void 0,void 0,function(){var e;return Zt(this,function(a){switch(a.label){case 0:return[4,this.mint.checkFees({pr:i})];case 1:return e=a.sent().fee,[2,e]}})})},f.prototype.createPaymentPayload=function(i,e){return{pr:i,proofs:e}},f.prototype.payLnInvoiceWithToken=function(i,e){var a=this,g=te(e),s=g.token.filter(function(v){return v.mint===a.mint.mintUrl}).flatMap(function(v){return v.proofs});return this.payLnInvoice(i,s)},f.prototype.receive=function(i){var e;return Kt(this,void 0,void 0,function(){var a,g,s,v,d,_,b,I,S,L,C,O;return Zt(this,function(U){switch(U.label){case 0:a=Pn(te(i)).token,g=[],s=[],d=0,_=a,U.label=1;case 1:if(!(d<_.length))return[3,6];if(b=_[d],!(!((e=b==null?void 0:b.proofs)===null||e===void 0)&&e.length))return[3,5];U.label=2;case 2:return U.trys.push([2,4,,5]),[4,this.receiveTokenEntry(b)];case 3:return I=U.sent(),S=I.proofsWithError,L=I.proofs,C=I.newKeys,S!=null&&S.length?(s.push(b),[3,5]):(g.push({mint:b.mint,proofs:jt([],L,!0)}),v||(v=C),[3,5]);case 4:return O=U.sent(),console.error(O),s.push(b),[3,5];case 5:return d++,[3,1];case 6:return[2,{token:{token:g},tokensWithErrors:s.length?{token:s}:void 0,newKeys:v}]}})})},f.prototype.receiveTokenEntry=function(i){return Kt(this,void 0,void 0,function(){var e,a,g,s,v,d,_,b,I,S,L,C,O,U,F,R,$,z,j,Z,P;return Zt(this,function(H){switch(H.label){case 0:e=[],a=[],H.label=1;case 1:return H.trys.push([1,8,,9]),s=i.proofs.reduce(function(V,G){return V+G.amount},0),v=this.createSplitPayload(0,s,i.proofs),d=v.payload,_=v.amount1BlindedMessages,b=v.amount2BlindedMessages,[4,Be.split(i.mint,d)];case 2:return I=H.sent(),S=I.fst,L=I.snd,U=(O=or).constructProofs,F=[S,_.rs,_.secrets],[4,this.getKeys(S,i.mint)];case 3:return C=U.apply(O,F.concat([H.sent()])),z=($=or).constructProofs,j=[L,b.rs,b.secrets],[4,this.getKeys(L,i.mint)];case 4:return R=z.apply($,j.concat([H.sent()])),a.push.apply(a,jt(jt([],C,!1),R,!1)),i.mint!==this.mint.mintUrl?[3,6]:[4,this.changedKeys(jt(jt([],S||[],!0),L||[],!0))];case 5:return Z=H.sent(),[3,7];case 6:Z=void 0,H.label=7;case 7:return g=Z,[3,9];case 8:return P=H.sent(),console.error(P),e.push.apply(e,i.proofs),[3,9];case 9:return[2,{proofs:a,proofsWithError:e.length?e:void 0,newKeys:g}]}})})},f.prototype.send=function(i,e){return Kt(this,void 0,void 0,function(){var a,g,s,v,d,_,b,I,S,L,C,O,U,F,R,$,z,j,Z,P,H,V;return Zt(this,function(G){switch(G.label){case 0:if(a=0,g=[],s=[],e.forEach(function(Q){if(a>=i){s.push(Q);return}a=a+Q.amount,g.push(Q)}),i>a)throw new Error("Not enough funds available");return i<a?(v=this.splitReceive(i,a),d=v.amount1,_=v.amount2,b=this.createSplitPayload(d,_,g),I=b.payload,S=b.amount1BlindedMessages,L=b.amount2BlindedMessages,[4,this.mint.split(I)]):[3,5];case 1:return C=G.sent(),O=C.fst,U=C.snd,$=(R=or).constructProofs,z=[O,S.rs,S.secrets],[4,this.getKeys(O)];case 2:return F=$.apply(R,z.concat([G.sent()])),P=(Z=or).constructProofs,H=[U,L.rs,L.secrets],[4,this.getKeys(U)];case 3:return j=P.apply(Z,H.concat([G.sent()])),V={returnChange:jt(jt([],F,!0),s,!0),send:j},[4,this.changedKeys(jt(jt([],O||[],!0),U||[],!0))];case 4:return[2,(V.newKeys=G.sent(),V)];case 5:return[2,{returnChange:s,send:g}]}})})},f.prototype.requestTokens=function(i,e){return Kt(this,void 0,void 0,function(){var a,g,s,v,d,_,b,I,S,L;return Zt(this,function(C){switch(C.label){case 0:return a=this.createRandomBlindedMessages(i),g=a.blindedMessages,s=a.secrets,v=a.rs,d={outputs:g},[4,this.mint.mint(d,e)];case 1:return _=C.sent().promises,L={},I=(b=or).constructProofs,S=[_,v,s],[4,this.getKeys(_)];case 2:return L.proofs=I.apply(b,S.concat([C.sent()])),[4,this.changedKeys(_)];case 3:return[2,(L.newKeys=C.sent(),L)]}})})},f.prototype.initKeys=function(){return Kt(this,void 0,void 0,function(){var i;return Zt(this,function(e){switch(e.label){case 0:return!this.keysetId||!Object.keys(this.keys).length?(i=this,[4,this.mint.getKeys()]):[3,2];case 1:i.keys=e.sent(),this._keysetId=pr(this.keys),e.label=2;case 2:return[2]}})})},f.prototype.changedKeys=function(i){return i===void 0&&(i=[]),Kt(this,void 0,void 0,function(){var e,a,g=this;return Zt(this,function(s){switch(s.label){case 0:return[4,this.initKeys()];case 1:return s.sent(),i!=null&&i.length?i.some(function(v){return v.id!==g.keysetId})?[4,this.mint.getKeys()]:[2,void 0]:[2,void 0];case 2:return e=s.sent(),a=pr(e),[2,a===this.keysetId?void 0:e]}})})},f.prototype.getKeys=function(i,e){var a;return Kt(this,void 0,void 0,function(){var g,s,v;return Zt(this,function(d){switch(d.label){case 0:return[4,this.initKeys()];case 1:return d.sent(),!(i!=null&&i.length)||!(!((a=i[0])===null||a===void 0)&&a.id)?[2,this.keys]:(g=i[0].id,this.keysetId===g?[2,this.keys]:!e||e===this.mint.mintUrl?[4,this.mint.getKeys(i[0].id)]:[3,3]);case 2:return v=d.sent(),[3,5];case 3:return[4,Be.getKeys(e,i[0].id)];case 4:v=d.sent(),d.label=5;case 5:return s=v,[2,s]}})})},f.prototype.createSplitPayload=function(i,e,a){var g=this.createRandomBlindedMessages(i),s=this.createRandomBlindedMessages(e),v=[];v.push.apply(v,g.blindedMessages),v.push.apply(v,s.blindedMessages);var d={proofs:a,amount:e,outputs:v};return{payload:d,amount1BlindedMessages:g,amount2BlindedMessages:s}},f.prototype.splitReceive=function(i,e){var a=e-i,g=i;return{amount1:a,amount2:g}},f.prototype.createRandomBlindedMessages=function(i){for(var e=[],a=[],g=[],s=Ln(i),v=0;v<s.length;v++){var d=Qr(32);a.push(d);var _=oe(d),b=_.B_,I=_.r;g.push(I);var S=new Te(s[v],b);e.push(S.getSerializedBlindedMessage())}return{blindedMessages:e,secrets:a,rs:g,amounts:s}},f.prototype.createBlankOutputs=function(i){for(var e=[],a=[],g=[],s=Math.ceil(Math.log2(i))||1,v=0;v<s;v++){var d=Qr(32);a.push(d);var _=oe(d),b=_.B_,I=_.r;g.push(I);var S=new Te(0,b);e.push(S.getSerializedBlindedMessage())}return{blindedMessages:e,secrets:a,rs:g}},f})();var Ue="qpzry9x8gf2tvdw0s3jn54khce6mua7l",ke={};for(var gr=0;gr<Ue.length;gr++){var Xr=Ue.charAt(gr);if(ke[Xr]!==void 0)throw new TypeError(Xr+" is ambiguous");ke[Xr]=gr}var ce={exports:{}};const gi={},mi=Object.freeze(Object.defineProperty({__proto__:null,default:gi},Symbol.toStringTag,{value:"Module"})),yi=rn(mi);ce.exports;(function(f){(function(i,e){function a(x,t){if(!x)throw new Error(t||"Assertion failed")}function g(x,t){x.super_=t;var u=function(){};u.prototype=t.prototype,x.prototype=new u,x.prototype.constructor=x}function s(x,t,u){if(s.isBN(x))return x;this.negative=0,this.words=null,this.length=0,this.red=null,x!==null&&((t==="le"||t==="be")&&(u=t,t=10),this._init(x||0,t||10,u||"be"))}typeof i=="object"?i.exports=s:e.BN=s,s.BN=s,s.wordSize=26;var v;try{typeof window<"u"&&typeof window.Buffer<"u"?v=window.Buffer:v=yi.Buffer}catch{}s.isBN=function(t){return t instanceof s?!0:t!==null&&typeof t=="object"&&t.constructor.wordSize===s.wordSize&&Array.isArray(t.words)},s.max=function(t,u){return t.cmp(u)>0?t:u},s.min=function(t,u){return t.cmp(u)<0?t:u},s.prototype._init=function(t,u,c){if(typeof t=="number")return this._initNumber(t,u,c);if(typeof t=="object")return this._initArray(t,u,c);u==="hex"&&(u=16),a(u===(u|0)&&u>=2&&u<=36),t=t.toString().replace(/\s+/g,"");var h=0;t[0]==="-"&&(h++,this.negative=1),h<t.length&&(u===16?this._parseHex(t,h,c):(this._parseBase(t,u,h),c==="le"&&this._initArray(this.toArray(),u,c)))},s.prototype._initNumber=function(t,u,c){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[t&67108863],this.length=1):t<4503599627370496?(this.words=[t&67108863,t/67108864&67108863],this.length=2):(a(t<9007199254740992),this.words=[t&67108863,t/67108864&67108863,1],this.length=3),c==="le"&&this._initArray(this.toArray(),u,c)},s.prototype._initArray=function(t,u,c){if(a(typeof t.length=="number"),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var p,M,E=0;if(c==="be")for(h=t.length-1,p=0;h>=0;h-=3)M=t[h]|t[h-1]<<8|t[h-2]<<16,this.words[p]|=M<<E&67108863,this.words[p+1]=M>>>26-E&67108863,E+=24,E>=26&&(E-=26,p++);else if(c==="le")for(h=0,p=0;h<t.length;h+=3)M=t[h]|t[h+1]<<8|t[h+2]<<16,this.words[p]|=M<<E&67108863,this.words[p+1]=M>>>26-E&67108863,E+=24,E>=26&&(E-=26,p++);return this.strip()};function d(x,t){var u=x.charCodeAt(t);return u>=65&&u<=70?u-55:u>=97&&u<=102?u-87:u-48&15}function _(x,t,u){var c=d(x,u);return u-1>=t&&(c|=d(x,u-1)<<4),c}s.prototype._parseHex=function(t,u,c){this.length=Math.ceil((t.length-u)/6),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var p=0,M=0,E;if(c==="be")for(h=t.length-1;h>=u;h-=2)E=_(t,u,h)<<p,this.words[M]|=E&67108863,p>=18?(p-=18,M+=1,this.words[M]|=E>>>26):p+=8;else{var m=t.length-u;for(h=m%2===0?u+1:u;h<t.length;h+=2)E=_(t,u,h)<<p,this.words[M]|=E&67108863,p>=18?(p-=18,M+=1,this.words[M]|=E>>>26):p+=8}this.strip()};function b(x,t,u,c){for(var h=0,p=Math.min(x.length,u),M=t;M<p;M++){var E=x.charCodeAt(M)-48;h*=c,E>=49?h+=E-49+10:E>=17?h+=E-17+10:h+=E}return h}s.prototype._parseBase=function(t,u,c){this.words=[0],this.length=1;for(var h=0,p=1;p<=67108863;p*=u)h++;h--,p=p/u|0;for(var M=t.length-c,E=M%h,m=Math.min(M,M-E)+c,n=0,w=c;w<m;w+=h)n=b(t,w,w+h,u),this.imuln(p),this.words[0]+n<67108864?this.words[0]+=n:this._iaddn(n);if(E!==0){var k=1;for(n=b(t,w,t.length,u),w=0;w<E;w++)k*=u;this.imuln(k),this.words[0]+n<67108864?this.words[0]+=n:this._iaddn(n)}this.strip()},s.prototype.copy=function(t){t.words=new Array(this.length);for(var u=0;u<this.length;u++)t.words[u]=this.words[u];t.length=this.length,t.negative=this.negative,t.red=this.red},s.prototype.clone=function(){var t=new s(null);return this.copy(t),t},s.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var I=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],S=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],L=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(t,u){t=t||10,u=u|0||1;var c;if(t===16||t==="hex"){c="";for(var h=0,p=0,M=0;M<this.length;M++){var E=this.words[M],m=((E<<h|p)&16777215).toString(16);p=E>>>24-h&16777215,p!==0||M!==this.length-1?c=I[6-m.length]+m+c:c=m+c,h+=2,h>=26&&(h-=26,M--)}for(p!==0&&(c=p.toString(16)+c);c.length%u!==0;)c="0"+c;return this.negative!==0&&(c="-"+c),c}if(t===(t|0)&&t>=2&&t<=36){var n=S[t],w=L[t];c="";var k=this.clone();for(k.negative=0;!k.isZero();){var N=k.modn(w).toString(t);k=k.idivn(w),k.isZero()?c=N+c:c=I[n-N.length]+N+c}for(this.isZero()&&(c="0"+c);c.length%u!==0;)c="0"+c;return this.negative!==0&&(c="-"+c),c}a(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var t=this.words[0];return this.length===2?t+=this.words[1]*67108864:this.length===3&&this.words[2]===1?t+=4503599627370496+this.words[1]*67108864:this.length>2&&a(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-t:t},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(t,u){return a(typeof v<"u"),this.toArrayLike(v,t,u)},s.prototype.toArray=function(t,u){return this.toArrayLike(Array,t,u)},s.prototype.toArrayLike=function(t,u,c){var h=this.byteLength(),p=c||Math.max(1,h);a(h<=p,"byte array longer than desired length"),a(p>0,"Requested array length <= 0"),this.strip();var M=u==="le",E=new t(p),m,n,w=this.clone();if(M){for(n=0;!w.isZero();n++)m=w.andln(255),w.iushrn(8),E[n]=m;for(;n<p;n++)E[n]=0}else{for(n=0;n<p-h;n++)E[n]=0;for(n=0;!w.isZero();n++)m=w.andln(255),w.iushrn(8),E[p-n-1]=m}return E},Math.clz32?s.prototype._countBits=function(t){return 32-Math.clz32(t)}:s.prototype._countBits=function(t){var u=t,c=0;return u>=4096&&(c+=13,u>>>=13),u>=64&&(c+=7,u>>>=7),u>=8&&(c+=4,u>>>=4),u>=2&&(c+=2,u>>>=2),c+u},s.prototype._zeroBits=function(t){if(t===0)return 26;var u=t,c=0;return u&8191||(c+=13,u>>>=13),u&127||(c+=7,u>>>=7),u&15||(c+=4,u>>>=4),u&3||(c+=2,u>>>=2),u&1||c++,c},s.prototype.bitLength=function(){var t=this.words[this.length-1],u=this._countBits(t);return(this.length-1)*26+u};function C(x){for(var t=new Array(x.bitLength()),u=0;u<t.length;u++){var c=u/26|0,h=u%26;t[u]=(x.words[c]&1<<h)>>>h}return t}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,u=0;u<this.length;u++){var c=this._zeroBits(this.words[u]);if(t+=c,c!==26)break}return t},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(t){return this.negative!==0?this.abs().inotn(t).iaddn(1):this.clone()},s.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var u=0;u<t.length;u++)this.words[u]=this.words[u]|t.words[u];return this.strip()},s.prototype.ior=function(t){return a((this.negative|t.negative)===0),this.iuor(t)},s.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},s.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},s.prototype.iuand=function(t){var u;this.length>t.length?u=t:u=this;for(var c=0;c<u.length;c++)this.words[c]=this.words[c]&t.words[c];return this.length=u.length,this.strip()},s.prototype.iand=function(t){return a((this.negative|t.negative)===0),this.iuand(t)},s.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},s.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},s.prototype.iuxor=function(t){var u,c;this.length>t.length?(u=this,c=t):(u=t,c=this);for(var h=0;h<c.length;h++)this.words[h]=u.words[h]^c.words[h];if(this!==u)for(;h<u.length;h++)this.words[h]=u.words[h];return this.length=u.length,this.strip()},s.prototype.ixor=function(t){return a((this.negative|t.negative)===0),this.iuxor(t)},s.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},s.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},s.prototype.inotn=function(t){a(typeof t=="number"&&t>=0);var u=Math.ceil(t/26)|0,c=t%26;this._expand(u),c>0&&u--;for(var h=0;h<u;h++)this.words[h]=~this.words[h]&67108863;return c>0&&(this.words[h]=~this.words[h]&67108863>>26-c),this.strip()},s.prototype.notn=function(t){return this.clone().inotn(t)},s.prototype.setn=function(t,u){a(typeof t=="number"&&t>=0);var c=t/26|0,h=t%26;return this._expand(c+1),u?this.words[c]=this.words[c]|1<<h:this.words[c]=this.words[c]&~(1<<h),this.strip()},s.prototype.iadd=function(t){var u;if(this.negative!==0&&t.negative===0)return this.negative=0,u=this.isub(t),this.negative^=1,this._normSign();if(this.negative===0&&t.negative!==0)return t.negative=0,u=this.isub(t),t.negative=1,u._normSign();var c,h;this.length>t.length?(c=this,h=t):(c=t,h=this);for(var p=0,M=0;M<h.length;M++)u=(c.words[M]|0)+(h.words[M]|0)+p,this.words[M]=u&67108863,p=u>>>26;for(;p!==0&&M<c.length;M++)u=(c.words[M]|0)+p,this.words[M]=u&67108863,p=u>>>26;if(this.length=c.length,p!==0)this.words[this.length]=p,this.length++;else if(c!==this)for(;M<c.length;M++)this.words[M]=c.words[M];return this},s.prototype.add=function(t){var u;return t.negative!==0&&this.negative===0?(t.negative=0,u=this.sub(t),t.negative^=1,u):t.negative===0&&this.negative!==0?(this.negative=0,u=t.sub(this),this.negative=1,u):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},s.prototype.isub=function(t){if(t.negative!==0){t.negative=0;var u=this.iadd(t);return t.negative=1,u._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var c=this.cmp(t);if(c===0)return this.negative=0,this.length=1,this.words[0]=0,this;var h,p;c>0?(h=this,p=t):(h=t,p=this);for(var M=0,E=0;E<p.length;E++)u=(h.words[E]|0)-(p.words[E]|0)+M,M=u>>26,this.words[E]=u&67108863;for(;M!==0&&E<h.length;E++)u=(h.words[E]|0)+M,M=u>>26,this.words[E]=u&67108863;if(M===0&&E<h.length&&h!==this)for(;E<h.length;E++)this.words[E]=h.words[E];return this.length=Math.max(this.length,E),h!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(t){return this.clone().isub(t)};function O(x,t,u){u.negative=t.negative^x.negative;var c=x.length+t.length|0;u.length=c,c=c-1|0;var h=x.words[0]|0,p=t.words[0]|0,M=h*p,E=M&67108863,m=M/67108864|0;u.words[0]=E;for(var n=1;n<c;n++){for(var w=m>>>26,k=m&67108863,N=Math.min(n,t.length-1),q=Math.max(0,n-x.length+1);q<=N;q++){var D=n-q|0;h=x.words[D]|0,p=t.words[q]|0,M=h*p+k,w+=M/67108864|0,k=M&67108863}u.words[n]=k|0,m=w|0}return m!==0?u.words[n]=m|0:u.length--,u.strip()}var U=function(t,u,c){var h=t.words,p=u.words,M=c.words,E=0,m,n,w,k=h[0]|0,N=k&8191,q=k>>>13,D=h[1]|0,X=D&8191,tt=D>>>13,kt=h[2]|0,rt=kt&8191,et=kt>>>13,Xt=h[3]|0,it=Xt&8191,J=Xt>>>13,Nt=h[4]|0,ft=Nt&8191,ut=Nt>>>13,er=h[5]|0,lt=er&8191,ct=er>>>13,hr=h[6]|0,at=hr&8191,nt=hr>>>13,nr=h[7]|0,dt=nr&8191,st=nr>>>13,dr=h[8]|0,l=dr&8191,r=dr>>>13,o=h[9]|0,y=o&8191,B=o>>>13,A=p[0]|0,T=A&8191,K=A>>>13,ht=p[1]|0,W=ht&8191,Y=ht>>>13,ot=p[2]|0,gt=ot&8191,mt=ot>>>13,de=p[3]|0,yt=de&8191,wt=de>>>13,pe=p[4]|0,vt=pe&8191,xt=pe>>>13,ge=p[5]|0,bt=ge&8191,Mt=ge>>>13,me=p[6]|0,Bt=me&8191,Et=me>>>13,ye=p[7]|0,_t=ye&8191,At=ye>>>13,we=p[8]|0,It=we&8191,St=we>>>13,ve=p[9]|0,Tt=ve&8191,Ut=ve>>>13;c.negative=t.negative^u.negative,c.length=19,m=Math.imul(N,T),n=Math.imul(N,K),n=n+Math.imul(q,T)|0,w=Math.imul(q,K);var Ir=(E+m|0)+((n&8191)<<13)|0;E=(w+(n>>>13)|0)+(Ir>>>26)|0,Ir&=67108863,m=Math.imul(X,T),n=Math.imul(X,K),n=n+Math.imul(tt,T)|0,w=Math.imul(tt,K),m=m+Math.imul(N,W)|0,n=n+Math.imul(N,Y)|0,n=n+Math.imul(q,W)|0,w=w+Math.imul(q,Y)|0;var Sr=(E+m|0)+((n&8191)<<13)|0;E=(w+(n>>>13)|0)+(Sr>>>26)|0,Sr&=67108863,m=Math.imul(rt,T),n=Math.imul(rt,K),n=n+Math.imul(et,T)|0,w=Math.imul(et,K),m=m+Math.imul(X,W)|0,n=n+Math.imul(X,Y)|0,n=n+Math.imul(tt,W)|0,w=w+Math.imul(tt,Y)|0,m=m+Math.imul(N,gt)|0,n=n+Math.imul(N,mt)|0,n=n+Math.imul(q,gt)|0,w=w+Math.imul(q,mt)|0;var Tr=(E+m|0)+((n&8191)<<13)|0;E=(w+(n>>>13)|0)+(Tr>>>26)|0,Tr&=67108863,m=Math.imul(it,T),n=Math.imul(it,K),n=n+Math.imul(J,T)|0,w=Math.imul(J,K),m=m+Math.imul(rt,W)|0,n=n+Math.imul(rt,Y)|0,n=n+Math.imul(et,W)|0,w=w+Math.imul(et,Y)|0,m=m+Math.imul(X,gt)|0,n=n+Math.imul(X,mt)|0,n=n+Math.imul(tt,gt)|0,w=w+Math.imul(tt,mt)|0,m=m+Math.imul(N,yt)|0,n=n+Math.imul(N,wt)|0,n=n+Math.imul(q,yt)|0,w=w+Math.imul(q,wt)|0;var Ur=(E+m|0)+((n&8191)<<13)|0;E=(w+(n>>>13)|0)+(Ur>>>26)|0,Ur&=67108863,m=Math.imul(ft,T),n=Math.imul(ft,K),n=n+Math.imul(ut,T)|0,w=Math.imul(ut,K),m=m+Math.imul(it,W)|0,n=n+Math.imul(it,Y)|0,n=n+Math.imul(J,W)|0,w=w+Math.imul(J,Y)|0,m=m+Math.imul(rt,gt)|0,n=n+Math.imul(rt,mt)|0,n=n+Math.imul(et,gt)|0,w=w+Math.imul(et,mt)|0,m=m+Math.imul(X,yt)|0,n=n+Math.imul(X,wt)|0,n=n+Math.imul(tt,yt)|0,w=w+Math.imul(tt,wt)|0,m=m+Math.imul(N,vt)|0,n=n+Math.imul(N,xt)|0,n=n+Math.imul(q,vt)|0,w=w+Math.imul(q,xt)|0;var kr=(E+m|0)+((n&8191)<<13)|0;E=(w+(n>>>13)|0)+(kr>>>26)|0,kr&=67108863,m=Math.imul(lt,T),n=Math.imul(lt,K),n=n+Math.imul(ct,T)|0,w=Math.imul(ct,K),m=m+Math.imul(ft,W)|0,n=n+Math.imul(ft,Y)|0,n=n+Math.imul(ut,W)|0,w=w+Math.imul(ut,Y)|0,m=m+Math.imul(it,gt)|0,n=n+Math.imul(it,mt)|0,n=n+Math.imul(J,gt)|0,w=w+Math.imul(J,mt)|0,m=m+Math.imul(rt,yt)|0,n=n+Math.imul(rt,wt)|0,n=n+Math.imul(et,yt)|0,w=w+Math.imul(et,wt)|0,m=m+Math.imul(X,vt)|0,n=n+Math.imul(X,xt)|0,n=n+Math.imul(tt,vt)|0,w=w+Math.imul(tt,xt)|0,m=m+Math.imul(N,bt)|0,n=n+Math.imul(N,Mt)|0,n=n+Math.imul(q,bt)|0,w=w+Math.imul(q,Mt)|0;var Fr=(E+m|0)+((n&8191)<<13)|0;E=(w+(n>>>13)|0)+(Fr>>>26)|0,Fr&=67108863,m=Math.imul(at,T),n=Math.imul(at,K),n=n+Math.imul(nt,T)|0,w=Math.imul(nt,K),m=m+Math.imul(lt,W)|0,n=n+Math.imul(lt,Y)|0,n=n+Math.imul(ct,W)|0,w=w+Math.imul(ct,Y)|0,m=m+Math.imul(ft,gt)|0,n=n+Math.imul(ft,mt)|0,n=n+Math.imul(ut,gt)|0,w=w+Math.imul(ut,mt)|0,m=m+Math.imul(it,yt)|0,n=n+Math.imul(it,wt)|0,n=n+Math.imul(J,yt)|0,w=w+Math.imul(J,wt)|0,m=m+Math.imul(rt,vt)|0,n=n+Math.imul(rt,xt)|0,n=n+Math.imul(et,vt)|0,w=w+Math.imul(et,xt)|0,m=m+Math.imul(X,bt)|0,n=n+Math.imul(X,Mt)|0,n=n+Math.imul(tt,bt)|0,w=w+Math.imul(tt,Mt)|0,m=m+Math.imul(N,Bt)|0,n=n+Math.imul(N,Et)|0,n=n+Math.imul(q,Bt)|0,w=w+Math.imul(q,Et)|0;var Rr=(E+m|0)+((n&8191)<<13)|0;E=(w+(n>>>13)|0)+(Rr>>>26)|0,Rr&=67108863,m=Math.imul(dt,T),n=Math.imul(dt,K),n=n+Math.imul(st,T)|0,w=Math.imul(st,K),m=m+Math.imul(at,W)|0,n=n+Math.imul(at,Y)|0,n=n+Math.imul(nt,W)|0,w=w+Math.imul(nt,Y)|0,m=m+Math.imul(lt,gt)|0,n=n+Math.imul(lt,mt)|0,n=n+Math.imul(ct,gt)|0,w=w+Math.imul(ct,mt)|0,m=m+Math.imul(ft,yt)|0,n=n+Math.imul(ft,wt)|0,n=n+Math.imul(ut,yt)|0,w=w+Math.imul(ut,wt)|0,m=m+Math.imul(it,vt)|0,n=n+Math.imul(it,xt)|0,n=n+Math.imul(J,vt)|0,w=w+Math.imul(J,xt)|0,m=m+Math.imul(rt,bt)|0,n=n+Math.imul(rt,Mt)|0,n=n+Math.imul(et,bt)|0,w=w+Math.imul(et,Mt)|0,m=m+Math.imul(X,Bt)|0,n=n+Math.imul(X,Et)|0,n=n+Math.imul(tt,Bt)|0,w=w+Math.imul(tt,Et)|0,m=m+Math.imul(N,_t)|0,n=n+Math.imul(N,At)|0,n=n+Math.imul(q,_t)|0,w=w+Math.imul(q,At)|0;var Or=(E+m|0)+((n&8191)<<13)|0;E=(w+(n>>>13)|0)+(Or>>>26)|0,Or&=67108863,m=Math.imul(l,T),n=Math.imul(l,K),n=n+Math.imul(r,T)|0,w=Math.imul(r,K),m=m+Math.imul(dt,W)|0,n=n+Math.imul(dt,Y)|0,n=n+Math.imul(st,W)|0,w=w+Math.imul(st,Y)|0,m=m+Math.imul(at,gt)|0,n=n+Math.imul(at,mt)|0,n=n+Math.imul(nt,gt)|0,w=w+Math.imul(nt,mt)|0,m=m+Math.imul(lt,yt)|0,n=n+Math.imul(lt,wt)|0,n=n+Math.imul(ct,yt)|0,w=w+Math.imul(ct,wt)|0,m=m+Math.imul(ft,vt)|0,n=n+Math.imul(ft,xt)|0,n=n+Math.imul(ut,vt)|0,w=w+Math.imul(ut,xt)|0,m=m+Math.imul(it,bt)|0,n=n+Math.imul(it,Mt)|0,n=n+Math.imul(J,bt)|0,w=w+Math.imul(J,Mt)|0,m=m+Math.imul(rt,Bt)|0,n=n+Math.imul(rt,Et)|0,n=n+Math.imul(et,Bt)|0,w=w+Math.imul(et,Et)|0,m=m+Math.imul(X,_t)|0,n=n+Math.imul(X,At)|0,n=n+Math.imul(tt,_t)|0,w=w+Math.imul(tt,At)|0,m=m+Math.imul(N,It)|0,n=n+Math.imul(N,St)|0,n=n+Math.imul(q,It)|0,w=w+Math.imul(q,St)|0;var Nr=(E+m|0)+((n&8191)<<13)|0;E=(w+(n>>>13)|0)+(Nr>>>26)|0,Nr&=67108863,m=Math.imul(y,T),n=Math.imul(y,K),n=n+Math.imul(B,T)|0,w=Math.imul(B,K),m=m+Math.imul(l,W)|0,n=n+Math.imul(l,Y)|0,n=n+Math.imul(r,W)|0,w=w+Math.imul(r,Y)|0,m=m+Math.imul(dt,gt)|0,n=n+Math.imul(dt,mt)|0,n=n+Math.imul(st,gt)|0,w=w+Math.imul(st,mt)|0,m=m+Math.imul(at,yt)|0,n=n+Math.imul(at,wt)|0,n=n+Math.imul(nt,yt)|0,w=w+Math.imul(nt,wt)|0,m=m+Math.imul(lt,vt)|0,n=n+Math.imul(lt,xt)|0,n=n+Math.imul(ct,vt)|0,w=w+Math.imul(ct,xt)|0,m=m+Math.imul(ft,bt)|0,n=n+Math.imul(ft,Mt)|0,n=n+Math.imul(ut,bt)|0,w=w+Math.imul(ut,Mt)|0,m=m+Math.imul(it,Bt)|0,n=n+Math.imul(it,Et)|0,n=n+Math.imul(J,Bt)|0,w=w+Math.imul(J,Et)|0,m=m+Math.imul(rt,_t)|0,n=n+Math.imul(rt,At)|0,n=n+Math.imul(et,_t)|0,w=w+Math.imul(et,At)|0,m=m+Math.imul(X,It)|0,n=n+Math.imul(X,St)|0,n=n+Math.imul(tt,It)|0,w=w+Math.imul(tt,St)|0,m=m+Math.imul(N,Tt)|0,n=n+Math.imul(N,Ut)|0,n=n+Math.imul(q,Tt)|0,w=w+Math.imul(q,Ut)|0;var Lr=(E+m|0)+((n&8191)<<13)|0;E=(w+(n>>>13)|0)+(Lr>>>26)|0,Lr&=67108863,m=Math.imul(y,W),n=Math.imul(y,Y),n=n+Math.imul(B,W)|0,w=Math.imul(B,Y),m=m+Math.imul(l,gt)|0,n=n+Math.imul(l,mt)|0,n=n+Math.imul(r,gt)|0,w=w+Math.imul(r,mt)|0,m=m+Math.imul(dt,yt)|0,n=n+Math.imul(dt,wt)|0,n=n+Math.imul(st,yt)|0,w=w+Math.imul(st,wt)|0,m=m+Math.imul(at,vt)|0,n=n+Math.imul(at,xt)|0,n=n+Math.imul(nt,vt)|0,w=w+Math.imul(nt,xt)|0,m=m+Math.imul(lt,bt)|0,n=n+Math.imul(lt,Mt)|0,n=n+Math.imul(ct,bt)|0,w=w+Math.imul(ct,Mt)|0,m=m+Math.imul(ft,Bt)|0,n=n+Math.imul(ft,Et)|0,n=n+Math.imul(ut,Bt)|0,w=w+Math.imul(ut,Et)|0,m=m+Math.imul(it,_t)|0,n=n+Math.imul(it,At)|0,n=n+Math.imul(J,_t)|0,w=w+Math.imul(J,At)|0,m=m+Math.imul(rt,It)|0,n=n+Math.imul(rt,St)|0,n=n+Math.imul(et,It)|0,w=w+Math.imul(et,St)|0,m=m+Math.imul(X,Tt)|0,n=n+Math.imul(X,Ut)|0,n=n+Math.imul(tt,Tt)|0,w=w+Math.imul(tt,Ut)|0;var qr=(E+m|0)+((n&8191)<<13)|0;E=(w+(n>>>13)|0)+(qr>>>26)|0,qr&=67108863,m=Math.imul(y,gt),n=Math.imul(y,mt),n=n+Math.imul(B,gt)|0,w=Math.imul(B,mt),m=m+Math.imul(l,yt)|0,n=n+Math.imul(l,wt)|0,n=n+Math.imul(r,yt)|0,w=w+Math.imul(r,wt)|0,m=m+Math.imul(dt,vt)|0,n=n+Math.imul(dt,xt)|0,n=n+Math.imul(st,vt)|0,w=w+Math.imul(st,xt)|0,m=m+Math.imul(at,bt)|0,n=n+Math.imul(at,Mt)|0,n=n+Math.imul(nt,bt)|0,w=w+Math.imul(nt,Mt)|0,m=m+Math.imul(lt,Bt)|0,n=n+Math.imul(lt,Et)|0,n=n+Math.imul(ct,Bt)|0,w=w+Math.imul(ct,Et)|0,m=m+Math.imul(ft,_t)|0,n=n+Math.imul(ft,At)|0,n=n+Math.imul(ut,_t)|0,w=w+Math.imul(ut,At)|0,m=m+Math.imul(it,It)|0,n=n+Math.imul(it,St)|0,n=n+Math.imul(J,It)|0,w=w+Math.imul(J,St)|0,m=m+Math.imul(rt,Tt)|0,n=n+Math.imul(rt,Ut)|0,n=n+Math.imul(et,Tt)|0,w=w+Math.imul(et,Ut)|0;var Cr=(E+m|0)+((n&8191)<<13)|0;E=(w+(n>>>13)|0)+(Cr>>>26)|0,Cr&=67108863,m=Math.imul(y,yt),n=Math.imul(y,wt),n=n+Math.imul(B,yt)|0,w=Math.imul(B,wt),m=m+Math.imul(l,vt)|0,n=n+Math.imul(l,xt)|0,n=n+Math.imul(r,vt)|0,w=w+Math.imul(r,xt)|0,m=m+Math.imul(dt,bt)|0,n=n+Math.imul(dt,Mt)|0,n=n+Math.imul(st,bt)|0,w=w+Math.imul(st,Mt)|0,m=m+Math.imul(at,Bt)|0,n=n+Math.imul(at,Et)|0,n=n+Math.imul(nt,Bt)|0,w=w+Math.imul(nt,Et)|0,m=m+Math.imul(lt,_t)|0,n=n+Math.imul(lt,At)|0,n=n+Math.imul(ct,_t)|0,w=w+Math.imul(ct,At)|0,m=m+Math.imul(ft,It)|0,n=n+Math.imul(ft,St)|0,n=n+Math.imul(ut,It)|0,w=w+Math.imul(ut,St)|0,m=m+Math.imul(it,Tt)|0,n=n+Math.imul(it,Ut)|0,n=n+Math.imul(J,Tt)|0,w=w+Math.imul(J,Ut)|0;var $r=(E+m|0)+((n&8191)<<13)|0;E=(w+(n>>>13)|0)+($r>>>26)|0,$r&=67108863,m=Math.imul(y,vt),n=Math.imul(y,xt),n=n+Math.imul(B,vt)|0,w=Math.imul(B,xt),m=m+Math.imul(l,bt)|0,n=n+Math.imul(l,Mt)|0,n=n+Math.imul(r,bt)|0,w=w+Math.imul(r,Mt)|0,m=m+Math.imul(dt,Bt)|0,n=n+Math.imul(dt,Et)|0,n=n+Math.imul(st,Bt)|0,w=w+Math.imul(st,Et)|0,m=m+Math.imul(at,_t)|0,n=n+Math.imul(at,At)|0,n=n+Math.imul(nt,_t)|0,w=w+Math.imul(nt,At)|0,m=m+Math.imul(lt,It)|0,n=n+Math.imul(lt,St)|0,n=n+Math.imul(ct,It)|0,w=w+Math.imul(ct,St)|0,m=m+Math.imul(ft,Tt)|0,n=n+Math.imul(ft,Ut)|0,n=n+Math.imul(ut,Tt)|0,w=w+Math.imul(ut,Ut)|0;var Pr=(E+m|0)+((n&8191)<<13)|0;E=(w+(n>>>13)|0)+(Pr>>>26)|0,Pr&=67108863,m=Math.imul(y,bt),n=Math.imul(y,Mt),n=n+Math.imul(B,bt)|0,w=Math.imul(B,Mt),m=m+Math.imul(l,Bt)|0,n=n+Math.imul(l,Et)|0,n=n+Math.imul(r,Bt)|0,w=w+Math.imul(r,Et)|0,m=m+Math.imul(dt,_t)|0,n=n+Math.imul(dt,At)|0,n=n+Math.imul(st,_t)|0,w=w+Math.imul(st,At)|0,m=m+Math.imul(at,It)|0,n=n+Math.imul(at,St)|0,n=n+Math.imul(nt,It)|0,w=w+Math.imul(nt,St)|0,m=m+Math.imul(lt,Tt)|0,n=n+Math.imul(lt,Ut)|0,n=n+Math.imul(ct,Tt)|0,w=w+Math.imul(ct,Ut)|0;var Hr=(E+m|0)+((n&8191)<<13)|0;E=(w+(n>>>13)|0)+(Hr>>>26)|0,Hr&=67108863,m=Math.imul(y,Bt),n=Math.imul(y,Et),n=n+Math.imul(B,Bt)|0,w=Math.imul(B,Et),m=m+Math.imul(l,_t)|0,n=n+Math.imul(l,At)|0,n=n+Math.imul(r,_t)|0,w=w+Math.imul(r,At)|0,m=m+Math.imul(dt,It)|0,n=n+Math.imul(dt,St)|0,n=n+Math.imul(st,It)|0,w=w+Math.imul(st,St)|0,m=m+Math.imul(at,Tt)|0,n=n+Math.imul(at,Ut)|0,n=n+Math.imul(nt,Tt)|0,w=w+Math.imul(nt,Ut)|0;var Kr=(E+m|0)+((n&8191)<<13)|0;E=(w+(n>>>13)|0)+(Kr>>>26)|0,Kr&=67108863,m=Math.imul(y,_t),n=Math.imul(y,At),n=n+Math.imul(B,_t)|0,w=Math.imul(B,At),m=m+Math.imul(l,It)|0,n=n+Math.imul(l,St)|0,n=n+Math.imul(r,It)|0,w=w+Math.imul(r,St)|0,m=m+Math.imul(dt,Tt)|0,n=n+Math.imul(dt,Ut)|0,n=n+Math.imul(st,Tt)|0,w=w+Math.imul(st,Ut)|0;var Zr=(E+m|0)+((n&8191)<<13)|0;E=(w+(n>>>13)|0)+(Zr>>>26)|0,Zr&=67108863,m=Math.imul(y,It),n=Math.imul(y,St),n=n+Math.imul(B,It)|0,w=Math.imul(B,St),m=m+Math.imul(l,Tt)|0,n=n+Math.imul(l,Ut)|0,n=n+Math.imul(r,Tt)|0,w=w+Math.imul(r,Ut)|0;var zr=(E+m|0)+((n&8191)<<13)|0;E=(w+(n>>>13)|0)+(zr>>>26)|0,zr&=67108863,m=Math.imul(y,Tt),n=Math.imul(y,Ut),n=n+Math.imul(B,Tt)|0,w=Math.imul(B,Ut);var Dr=(E+m|0)+((n&8191)<<13)|0;return E=(w+(n>>>13)|0)+(Dr>>>26)|0,Dr&=67108863,M[0]=Ir,M[1]=Sr,M[2]=Tr,M[3]=Ur,M[4]=kr,M[5]=Fr,M[6]=Rr,M[7]=Or,M[8]=Nr,M[9]=Lr,M[10]=qr,M[11]=Cr,M[12]=$r,M[13]=Pr,M[14]=Hr,M[15]=Kr,M[16]=Zr,M[17]=zr,M[18]=Dr,E!==0&&(M[19]=E,c.length++),c};Math.imul||(U=O);function F(x,t,u){u.negative=t.negative^x.negative,u.length=x.length+t.length;for(var c=0,h=0,p=0;p<u.length-1;p++){var M=h;h=0;for(var E=c&67108863,m=Math.min(p,t.length-1),n=Math.max(0,p-x.length+1);n<=m;n++){var w=p-n,k=x.words[w]|0,N=t.words[n]|0,q=k*N,D=q&67108863;M=M+(q/67108864|0)|0,D=D+E|0,E=D&67108863,M=M+(D>>>26)|0,h+=M>>>26,M&=67108863}u.words[p]=E,c=M,M=h}return c!==0?u.words[p]=c:u.length--,u.strip()}function R(x,t,u){var c=new $;return c.mulp(x,t,u)}s.prototype.mulTo=function(t,u){var c,h=this.length+t.length;return this.length===10&&t.length===10?c=U(this,t,u):h<63?c=O(this,t,u):h<1024?c=F(this,t,u):c=R(this,t,u),c};function $(x,t){this.x=x,this.y=t}$.prototype.makeRBT=function(t){for(var u=new Array(t),c=s.prototype._countBits(t)-1,h=0;h<t;h++)u[h]=this.revBin(h,c,t);return u},$.prototype.revBin=function(t,u,c){if(t===0||t===c-1)return t;for(var h=0,p=0;p<u;p++)h|=(t&1)<<u-p-1,t>>=1;return h},$.prototype.permute=function(t,u,c,h,p,M){for(var E=0;E<M;E++)h[E]=u[t[E]],p[E]=c[t[E]]},$.prototype.transform=function(t,u,c,h,p,M){this.permute(M,t,u,c,h,p);for(var E=1;E<p;E<<=1)for(var m=E<<1,n=Math.cos(2*Math.PI/m),w=Math.sin(2*Math.PI/m),k=0;k<p;k+=m)for(var N=n,q=w,D=0;D<E;D++){var X=c[k+D],tt=h[k+D],kt=c[k+D+E],rt=h[k+D+E],et=N*kt-q*rt;rt=N*rt+q*kt,kt=et,c[k+D]=X+kt,h[k+D]=tt+rt,c[k+D+E]=X-kt,h[k+D+E]=tt-rt,D!==m&&(et=n*N-w*q,q=n*q+w*N,N=et)}},$.prototype.guessLen13b=function(t,u){var c=Math.max(u,t)|1,h=c&1,p=0;for(c=c/2|0;c;c=c>>>1)p++;return 1<<p+1+h},$.prototype.conjugate=function(t,u,c){if(!(c<=1))for(var h=0;h<c/2;h++){var p=t[h];t[h]=t[c-h-1],t[c-h-1]=p,p=u[h],u[h]=-u[c-h-1],u[c-h-1]=-p}},$.prototype.normalize13b=function(t,u){for(var c=0,h=0;h<u/2;h++){var p=Math.round(t[2*h+1]/u)*8192+Math.round(t[2*h]/u)+c;t[h]=p&67108863,p<67108864?c=0:c=p/67108864|0}return t},$.prototype.convert13b=function(t,u,c,h){for(var p=0,M=0;M<u;M++)p=p+(t[M]|0),c[2*M]=p&8191,p=p>>>13,c[2*M+1]=p&8191,p=p>>>13;for(M=2*u;M<h;++M)c[M]=0;a(p===0),a((p&-8192)===0)},$.prototype.stub=function(t){for(var u=new Array(t),c=0;c<t;c++)u[c]=0;return u},$.prototype.mulp=function(t,u,c){var h=2*this.guessLen13b(t.length,u.length),p=this.makeRBT(h),M=this.stub(h),E=new Array(h),m=new Array(h),n=new Array(h),w=new Array(h),k=new Array(h),N=new Array(h),q=c.words;q.length=h,this.convert13b(t.words,t.length,E,h),this.convert13b(u.words,u.length,w,h),this.transform(E,M,m,n,h,p),this.transform(w,M,k,N,h,p);for(var D=0;D<h;D++){var X=m[D]*k[D]-n[D]*N[D];n[D]=m[D]*N[D]+n[D]*k[D],m[D]=X}return this.conjugate(m,n,h),this.transform(m,n,q,M,h,p),this.conjugate(q,M,h),this.normalize13b(q,h),c.negative=t.negative^u.negative,c.length=t.length+u.length,c.strip()},s.prototype.mul=function(t){var u=new s(null);return u.words=new Array(this.length+t.length),this.mulTo(t,u)},s.prototype.mulf=function(t){var u=new s(null);return u.words=new Array(this.length+t.length),R(this,t,u)},s.prototype.imul=function(t){return this.clone().mulTo(t,this)},s.prototype.imuln=function(t){a(typeof t=="number"),a(t<67108864);for(var u=0,c=0;c<this.length;c++){var h=(this.words[c]|0)*t,p=(h&67108863)+(u&67108863);u>>=26,u+=h/67108864|0,u+=p>>>26,this.words[c]=p&67108863}return u!==0&&(this.words[c]=u,this.length++),this},s.prototype.muln=function(t){return this.clone().imuln(t)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(t){var u=C(t);if(u.length===0)return new s(1);for(var c=this,h=0;h<u.length&&u[h]===0;h++,c=c.sqr());if(++h<u.length)for(var p=c.sqr();h<u.length;h++,p=p.sqr())u[h]!==0&&(c=c.mul(p));return c},s.prototype.iushln=function(t){a(typeof t=="number"&&t>=0);var u=t%26,c=(t-u)/26,h=67108863>>>26-u<<26-u,p;if(u!==0){var M=0;for(p=0;p<this.length;p++){var E=this.words[p]&h,m=(this.words[p]|0)-E<<u;this.words[p]=m|M,M=E>>>26-u}M&&(this.words[p]=M,this.length++)}if(c!==0){for(p=this.length-1;p>=0;p--)this.words[p+c]=this.words[p];for(p=0;p<c;p++)this.words[p]=0;this.length+=c}return this.strip()},s.prototype.ishln=function(t){return a(this.negative===0),this.iushln(t)},s.prototype.iushrn=function(t,u,c){a(typeof t=="number"&&t>=0);var h;u?h=(u-u%26)/26:h=0;var p=t%26,M=Math.min((t-p)/26,this.length),E=67108863^67108863>>>p<<p,m=c;if(h-=M,h=Math.max(0,h),m){for(var n=0;n<M;n++)m.words[n]=this.words[n];m.length=M}if(M!==0)if(this.length>M)for(this.length-=M,n=0;n<this.length;n++)this.words[n]=this.words[n+M];else this.words[0]=0,this.length=1;var w=0;for(n=this.length-1;n>=0&&(w!==0||n>=h);n--){var k=this.words[n]|0;this.words[n]=w<<26-p|k>>>p,w=k&E}return m&&w!==0&&(m.words[m.length++]=w),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(t,u,c){return a(this.negative===0),this.iushrn(t,u,c)},s.prototype.shln=function(t){return this.clone().ishln(t)},s.prototype.ushln=function(t){return this.clone().iushln(t)},s.prototype.shrn=function(t){return this.clone().ishrn(t)},s.prototype.ushrn=function(t){return this.clone().iushrn(t)},s.prototype.testn=function(t){a(typeof t=="number"&&t>=0);var u=t%26,c=(t-u)/26,h=1<<u;if(this.length<=c)return!1;var p=this.words[c];return!!(p&h)},s.prototype.imaskn=function(t){a(typeof t=="number"&&t>=0);var u=t%26,c=(t-u)/26;if(a(this.negative===0,"imaskn works only with positive numbers"),this.length<=c)return this;if(u!==0&&c++,this.length=Math.min(c,this.length),u!==0){var h=67108863^67108863>>>u<<u;this.words[this.length-1]&=h}return this.strip()},s.prototype.maskn=function(t){return this.clone().imaskn(t)},s.prototype.iaddn=function(t){return a(typeof t=="number"),a(t<67108864),t<0?this.isubn(-t):this.negative!==0?this.length===1&&(this.words[0]|0)<t?(this.words[0]=t-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},s.prototype._iaddn=function(t){this.words[0]+=t;for(var u=0;u<this.length&&this.words[u]>=67108864;u++)this.words[u]-=67108864,u===this.length-1?this.words[u+1]=1:this.words[u+1]++;return this.length=Math.max(this.length,u+1),this},s.prototype.isubn=function(t){if(a(typeof t=="number"),a(t<67108864),t<0)return this.iaddn(-t);if(this.negative!==0)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var u=0;u<this.length&&this.words[u]<0;u++)this.words[u]+=67108864,this.words[u+1]-=1;return this.strip()},s.prototype.addn=function(t){return this.clone().iaddn(t)},s.prototype.subn=function(t){return this.clone().isubn(t)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(t,u,c){var h=t.length+c,p;this._expand(h);var M,E=0;for(p=0;p<t.length;p++){M=(this.words[p+c]|0)+E;var m=(t.words[p]|0)*u;M-=m&67108863,E=(M>>26)-(m/67108864|0),this.words[p+c]=M&67108863}for(;p<this.length-c;p++)M=(this.words[p+c]|0)+E,E=M>>26,this.words[p+c]=M&67108863;if(E===0)return this.strip();for(a(E===-1),E=0,p=0;p<this.length;p++)M=-(this.words[p]|0)+E,E=M>>26,this.words[p]=M&67108863;return this.negative=1,this.strip()},s.prototype._wordDiv=function(t,u){var c=this.length-t.length,h=this.clone(),p=t,M=p.words[p.length-1]|0,E=this._countBits(M);c=26-E,c!==0&&(p=p.ushln(c),h.iushln(c),M=p.words[p.length-1]|0);var m=h.length-p.length,n;if(u!=="mod"){n=new s(null),n.length=m+1,n.words=new Array(n.length);for(var w=0;w<n.length;w++)n.words[w]=0}var k=h.clone()._ishlnsubmul(p,1,m);k.negative===0&&(h=k,n&&(n.words[m]=1));for(var N=m-1;N>=0;N--){var q=(h.words[p.length+N]|0)*67108864+(h.words[p.length+N-1]|0);for(q=Math.min(q/M|0,67108863),h._ishlnsubmul(p,q,N);h.negative!==0;)q--,h.negative=0,h._ishlnsubmul(p,1,N),h.isZero()||(h.negative^=1);n&&(n.words[N]=q)}return n&&n.strip(),h.strip(),u!=="div"&&c!==0&&h.iushrn(c),{div:n||null,mod:h}},s.prototype.divmod=function(t,u,c){if(a(!t.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var h,p,M;return this.negative!==0&&t.negative===0?(M=this.neg().divmod(t,u),u!=="mod"&&(h=M.div.neg()),u!=="div"&&(p=M.mod.neg(),c&&p.negative!==0&&p.iadd(t)),{div:h,mod:p}):this.negative===0&&t.negative!==0?(M=this.divmod(t.neg(),u),u!=="mod"&&(h=M.div.neg()),{div:h,mod:M.mod}):this.negative&t.negative?(M=this.neg().divmod(t.neg(),u),u!=="div"&&(p=M.mod.neg(),c&&p.negative!==0&&p.isub(t)),{div:M.div,mod:p}):t.length>this.length||this.cmp(t)<0?{div:new s(0),mod:this}:t.length===1?u==="div"?{div:this.divn(t.words[0]),mod:null}:u==="mod"?{div:null,mod:new s(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new s(this.modn(t.words[0]))}:this._wordDiv(t,u)},s.prototype.div=function(t){return this.divmod(t,"div",!1).div},s.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},s.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},s.prototype.divRound=function(t){var u=this.divmod(t);if(u.mod.isZero())return u.div;var c=u.div.negative!==0?u.mod.isub(t):u.mod,h=t.ushrn(1),p=t.andln(1),M=c.cmp(h);return M<0||p===1&&M===0?u.div:u.div.negative!==0?u.div.isubn(1):u.div.iaddn(1)},s.prototype.modn=function(t){a(t<=67108863);for(var u=(1<<26)%t,c=0,h=this.length-1;h>=0;h--)c=(u*c+(this.words[h]|0))%t;return c},s.prototype.idivn=function(t){a(t<=67108863);for(var u=0,c=this.length-1;c>=0;c--){var h=(this.words[c]|0)+u*67108864;this.words[c]=h/t|0,u=h%t}return this.strip()},s.prototype.divn=function(t){return this.clone().idivn(t)},s.prototype.egcd=function(t){a(t.negative===0),a(!t.isZero());var u=this,c=t.clone();u.negative!==0?u=u.umod(t):u=u.clone();for(var h=new s(1),p=new s(0),M=new s(0),E=new s(1),m=0;u.isEven()&&c.isEven();)u.iushrn(1),c.iushrn(1),++m;for(var n=c.clone(),w=u.clone();!u.isZero();){for(var k=0,N=1;!(u.words[0]&N)&&k<26;++k,N<<=1);if(k>0)for(u.iushrn(k);k-- >0;)(h.isOdd()||p.isOdd())&&(h.iadd(n),p.isub(w)),h.iushrn(1),p.iushrn(1);for(var q=0,D=1;!(c.words[0]&D)&&q<26;++q,D<<=1);if(q>0)for(c.iushrn(q);q-- >0;)(M.isOdd()||E.isOdd())&&(M.iadd(n),E.isub(w)),M.iushrn(1),E.iushrn(1);u.cmp(c)>=0?(u.isub(c),h.isub(M),p.isub(E)):(c.isub(u),M.isub(h),E.isub(p))}return{a:M,b:E,gcd:c.iushln(m)}},s.prototype._invmp=function(t){a(t.negative===0),a(!t.isZero());var u=this,c=t.clone();u.negative!==0?u=u.umod(t):u=u.clone();for(var h=new s(1),p=new s(0),M=c.clone();u.cmpn(1)>0&&c.cmpn(1)>0;){for(var E=0,m=1;!(u.words[0]&m)&&E<26;++E,m<<=1);if(E>0)for(u.iushrn(E);E-- >0;)h.isOdd()&&h.iadd(M),h.iushrn(1);for(var n=0,w=1;!(c.words[0]&w)&&n<26;++n,w<<=1);if(n>0)for(c.iushrn(n);n-- >0;)p.isOdd()&&p.iadd(M),p.iushrn(1);u.cmp(c)>=0?(u.isub(c),h.isub(p)):(c.isub(u),p.isub(h))}var k;return u.cmpn(1)===0?k=h:k=p,k.cmpn(0)<0&&k.iadd(t),k},s.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var u=this.clone(),c=t.clone();u.negative=0,c.negative=0;for(var h=0;u.isEven()&&c.isEven();h++)u.iushrn(1),c.iushrn(1);do{for(;u.isEven();)u.iushrn(1);for(;c.isEven();)c.iushrn(1);var p=u.cmp(c);if(p<0){var M=u;u=c,c=M}else if(p===0||c.cmpn(1)===0)break;u.isub(c)}while(!0);return c.iushln(h)},s.prototype.invm=function(t){return this.egcd(t).a.umod(t)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(t){return this.words[0]&t},s.prototype.bincn=function(t){a(typeof t=="number");var u=t%26,c=(t-u)/26,h=1<<u;if(this.length<=c)return this._expand(c+1),this.words[c]|=h,this;for(var p=h,M=c;p!==0&&M<this.length;M++){var E=this.words[M]|0;E+=p,p=E>>>26,E&=67108863,this.words[M]=E}return p!==0&&(this.words[M]=p,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(t){var u=t<0;if(this.negative!==0&&!u)return-1;if(this.negative===0&&u)return 1;this.strip();var c;if(this.length>1)c=1;else{u&&(t=-t),a(t<=67108863,"Number is too big");var h=this.words[0]|0;c=h===t?0:h<t?-1:1}return this.negative!==0?-c|0:c},s.prototype.cmp=function(t){if(this.negative!==0&&t.negative===0)return-1;if(this.negative===0&&t.negative!==0)return 1;var u=this.ucmp(t);return this.negative!==0?-u|0:u},s.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var u=0,c=this.length-1;c>=0;c--){var h=this.words[c]|0,p=t.words[c]|0;if(h!==p){h<p?u=-1:h>p&&(u=1);break}}return u},s.prototype.gtn=function(t){return this.cmpn(t)===1},s.prototype.gt=function(t){return this.cmp(t)===1},s.prototype.gten=function(t){return this.cmpn(t)>=0},s.prototype.gte=function(t){return this.cmp(t)>=0},s.prototype.ltn=function(t){return this.cmpn(t)===-1},s.prototype.lt=function(t){return this.cmp(t)===-1},s.prototype.lten=function(t){return this.cmpn(t)<=0},s.prototype.lte=function(t){return this.cmp(t)<=0},s.prototype.eqn=function(t){return this.cmpn(t)===0},s.prototype.eq=function(t){return this.cmp(t)===0},s.red=function(t){return new G(t)},s.prototype.toRed=function(t){return a(!this.red,"Already a number in reduction context"),a(this.negative===0,"red works only with positives"),t.convertTo(this)._forceRed(t)},s.prototype.fromRed=function(){return a(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(t){return this.red=t,this},s.prototype.forceRed=function(t){return a(!this.red,"Already a number in reduction context"),this._forceRed(t)},s.prototype.redAdd=function(t){return a(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},s.prototype.redIAdd=function(t){return a(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},s.prototype.redSub=function(t){return a(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},s.prototype.redISub=function(t){return a(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},s.prototype.redShl=function(t){return a(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},s.prototype.redMul=function(t){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},s.prototype.redIMul=function(t){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},s.prototype.redSqr=function(){return a(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return a(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return a(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return a(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return a(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(t){return a(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var z={k256:null,p224:null,p192:null,p25519:null};function j(x,t){this.name=x,this.p=new s(t,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}j.prototype._tmp=function(){var t=new s(null);return t.words=new Array(Math.ceil(this.n/13)),t},j.prototype.ireduce=function(t){var u=t,c;do this.split(u,this.tmp),u=this.imulK(u),u=u.iadd(this.tmp),c=u.bitLength();while(c>this.n);var h=c<this.n?-1:u.ucmp(this.p);return h===0?(u.words[0]=0,u.length=1):h>0?u.isub(this.p):u.strip!==void 0?u.strip():u._strip(),u},j.prototype.split=function(t,u){t.iushrn(this.n,0,u)},j.prototype.imulK=function(t){return t.imul(this.k)};function Z(){j.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}g(Z,j),Z.prototype.split=function(t,u){for(var c=4194303,h=Math.min(t.length,9),p=0;p<h;p++)u.words[p]=t.words[p];if(u.length=h,t.length<=9){t.words[0]=0,t.length=1;return}var M=t.words[9];for(u.words[u.length++]=M&c,p=10;p<t.length;p++){var E=t.words[p]|0;t.words[p-10]=(E&c)<<4|M>>>22,M=E}M>>>=22,t.words[p-10]=M,M===0&&t.length>10?t.length-=10:t.length-=9},Z.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var u=0,c=0;c<t.length;c++){var h=t.words[c]|0;u+=h*977,t.words[c]=u&67108863,u=h*64+(u/67108864|0)}return t.words[t.length-1]===0&&(t.length--,t.words[t.length-1]===0&&t.length--),t};function P(){j.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}g(P,j);function H(){j.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}g(H,j);function V(){j.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}g(V,j),V.prototype.imulK=function(t){for(var u=0,c=0;c<t.length;c++){var h=(t.words[c]|0)*19+u,p=h&67108863;h>>>=26,t.words[c]=p,u=h}return u!==0&&(t.words[t.length++]=u),t},s._prime=function(t){if(z[t])return z[t];var u;if(t==="k256")u=new Z;else if(t==="p224")u=new P;else if(t==="p192")u=new H;else if(t==="p25519")u=new V;else throw new Error("Unknown prime "+t);return z[t]=u,u};function G(x){if(typeof x=="string"){var t=s._prime(x);this.m=t.p,this.prime=t}else a(x.gtn(1),"modulus must be greater than 1"),this.m=x,this.prime=null}G.prototype._verify1=function(t){a(t.negative===0,"red works only with positives"),a(t.red,"red works only with red numbers")},G.prototype._verify2=function(t,u){a((t.negative|u.negative)===0,"red works only with positives"),a(t.red&&t.red===u.red,"red works only with red numbers")},G.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},G.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},G.prototype.add=function(t,u){this._verify2(t,u);var c=t.add(u);return c.cmp(this.m)>=0&&c.isub(this.m),c._forceRed(this)},G.prototype.iadd=function(t,u){this._verify2(t,u);var c=t.iadd(u);return c.cmp(this.m)>=0&&c.isub(this.m),c},G.prototype.sub=function(t,u){this._verify2(t,u);var c=t.sub(u);return c.cmpn(0)<0&&c.iadd(this.m),c._forceRed(this)},G.prototype.isub=function(t,u){this._verify2(t,u);var c=t.isub(u);return c.cmpn(0)<0&&c.iadd(this.m),c},G.prototype.shl=function(t,u){return this._verify1(t),this.imod(t.ushln(u))},G.prototype.imul=function(t,u){return this._verify2(t,u),this.imod(t.imul(u))},G.prototype.mul=function(t,u){return this._verify2(t,u),this.imod(t.mul(u))},G.prototype.isqr=function(t){return this.imul(t,t.clone())},G.prototype.sqr=function(t){return this.mul(t,t)},G.prototype.sqrt=function(t){if(t.isZero())return t.clone();var u=this.m.andln(3);if(a(u%2===1),u===3){var c=this.m.add(new s(1)).iushrn(2);return this.pow(t,c)}for(var h=this.m.subn(1),p=0;!h.isZero()&&h.andln(1)===0;)p++,h.iushrn(1);a(!h.isZero());var M=new s(1).toRed(this),E=M.redNeg(),m=this.m.subn(1).iushrn(1),n=this.m.bitLength();for(n=new s(2*n*n).toRed(this);this.pow(n,m).cmp(E)!==0;)n.redIAdd(E);for(var w=this.pow(n,h),k=this.pow(t,h.addn(1).iushrn(1)),N=this.pow(t,h),q=p;N.cmp(M)!==0;){for(var D=N,X=0;D.cmp(M)!==0;X++)D=D.redSqr();a(X<q);var tt=this.pow(w,new s(1).iushln(q-X-1));k=k.redMul(tt),w=tt.redSqr(),N=N.redMul(w),q=X}return k},G.prototype.invm=function(t){var u=t._invmp(this.m);return u.negative!==0?(u.negative=0,this.imod(u).redNeg()):this.imod(u)},G.prototype.pow=function(t,u){if(u.isZero())return new s(1).toRed(this);if(u.cmpn(1)===0)return t.clone();var c=4,h=new Array(1<<c);h[0]=new s(1).toRed(this),h[1]=t;for(var p=2;p<h.length;p++)h[p]=this.mul(h[p-1],t);var M=h[0],E=0,m=0,n=u.bitLength()%26;for(n===0&&(n=26),p=u.length-1;p>=0;p--){for(var w=u.words[p],k=n-1;k>=0;k--){var N=w>>k&1;if(M!==h[0]&&(M=this.sqr(M)),N===0&&E===0){m=0;continue}E<<=1,E|=N,m++,!(m!==c&&(p!==0||k!==0))&&(M=this.mul(M,h[E]),m=0,E=0)}n=26}return M},G.prototype.convertTo=function(t){var u=t.umod(this.m);return u===t?u.clone():u},G.prototype.convertFrom=function(t){var u=t.clone();return u.red=null,u},s.mont=function(t){return new Q(t)};function Q(x){G.call(this,x),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}g(Q,G),Q.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},Q.prototype.convertFrom=function(t){var u=this.imod(t.mul(this.rinv));return u.red=null,u},Q.prototype.imul=function(t,u){if(t.isZero()||u.isZero())return t.words[0]=0,t.length=1,t;var c=t.imul(u),h=c.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),p=c.isub(h).iushrn(this.shift),M=p;return p.cmp(this.m)>=0?M=p.isub(this.m):p.cmpn(0)<0&&(M=p.iadd(this.m)),M._forceRed(this)},Q.prototype.mul=function(t,u){if(t.isZero()||u.isZero())return new s(0)._forceRed(this);var c=t.mul(u),h=c.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),p=c.isub(h).iushrn(this.shift),M=p;return p.cmp(this.m)>=0?M=p.isub(this.m):p.cmpn(0)<0&&(M=p.iadd(this.m)),M._forceRed(this)},Q.prototype.invm=function(t){var u=this.imod(t._invmp(this.m).mul(this.r2));return u._forceRed(this)}})(f,en)})(ce);var fr=ce.exports;new fr.BN(1e3,10),new fr.BN(1e6,10),new fr.BN(1e9,10),new fr.BN(1e12,10);new fr.BN("2100000000000000000",10);new fr.BN(1e11,10);var Fe={payment_hash:1,payment_secret:16,description:13,payee:19,description_hash:23,expiry:6,min_final_cltv_expiry:24,fallback_address:9,route_hint:3,feature_bits:5,metadata:27};for(var mr=0,Jr=Object.keys(Fe);mr<Jr.length;mr++)Jr[mr],Fe[Jr[mr]].toString();function wi(f){return f.startsWith("cashuA")}function vi(f){if(!f.startsWith("cashuA"))throw new Error("Cannot read token: cannot recognize token format.");const{token:i}=te(f);if(i.length!==1)throw new Error("Cannot read token: unexpected number of token entries found, expected 1.");const[e]=i;return{amount:e.proofs.reduce((a,g)=>a+g.amount,0),mint:e.mint,proofs:e.proofs}}async function xi(f){if(wi(f))return vi(f)}async function bi(f){}async function Mi({url:f}){const i=tn.subscribe(async e=>{if(!e.url)return;const a=e.url.hash;await xi(a);const g=await bi();i(),Je(`${Qe}/offer/${g}`,{replaceState:!0,noScroll:!1,invalidateAll:!0,keepFocus:!0})})}const Ti=Object.freeze(Object.defineProperty({__proto__:null,load:Mi},Symbol.toStringTag,{value:"Module"}));export{Ti as universal};
